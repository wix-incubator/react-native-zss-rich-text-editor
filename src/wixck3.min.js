!function(){function t(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n,r,i;!function(t){function e(t,e){return C.call(t,e)}function o(t,e){var n,r,i,o,a,u,c,l,s,f,d,h,m=e&&e.split("/"),g=E.map,p=g&&g["*"]||{};if(t){for(t=t.split("/"),a=t.length-1,E.nodeIdCompat&&x.test(t[a])&&(t[a]=t[a].replace(x,"")),"."===t[0].charAt(0)&&m&&(h=m.slice(0,m.length-1),t=h.concat(t)),s=0;s<t.length;s++)if(d=t[s],"."===d)t.splice(s,1),s-=1;else if(".."===d){if(0===s||1===s&&".."===t[2]||".."===t[s-1])continue;s>0&&(t.splice(s-1,2),s-=2)}t=t.join("/")}if((m||p)&&g){for(n=t.split("/"),s=n.length;s>0;s-=1){if(r=n.slice(0,s).join("/"),m)for(f=m.length;f>0;f-=1)if(i=g[m.slice(0,f).join("/")],i&&(i=i[r])){o=i,u=s;break}if(o)break;!c&&p&&p[r]&&(c=p[r],l=s)}!o&&c&&(o=c,u=l),o&&(n.splice(0,u,o),t=n.join("/"))}return t}function a(e,n){return function(){var r=T.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),m.apply(t,r.concat([e,n]))}}function u(t){return function(e){return o(e,t)}}function c(t){return function(e){v[t]=e}}function l(n){if(e(_,n)){var r=_[n];delete _[n],y[n]=!0,h.apply(t,r)}if(!e(v,n)&&!e(y,n))throw new Error("No "+n);return v[n]}function s(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function f(t){return t?s(t):[]}function d(t){return function(){return E&&E.config&&E.config[t]||{}}}var h,m,g,p,v={},_={},E={},y={},C=Object.prototype.hasOwnProperty,T=[].slice,x=/\.js$/;g=function(t,e){var n,r=s(t),i=r[0],a=e[1];return t=r[1],i&&(i=o(i,a),n=l(i)),i?t=n&&n.normalize?n.normalize(t,u(a)):o(t,a):(t=o(t,a),r=s(t),i=r[0],t=r[1],i&&(n=l(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:n}},p={require:function(t){return a(t)},exports:function(t){var e=v[t];return"undefined"!=typeof e?e:v[t]={}},module:function(t){return{id:t,uri:"",exports:v[t],config:d(t)}}},h=function(n,r,i,o){var u,s,d,h,m,E,C,T=[],x=typeof i;if(o=o||n,E=f(o),"undefined"===x||"function"===x){for(r=!r.length&&i.length?["require","exports","module"]:r,m=0;m<r.length;m+=1)if(h=g(r[m],E),s=h.f,"require"===s)T[m]=p.require(n);else if("exports"===s)T[m]=p.exports(n),C=!0;else if("module"===s)u=T[m]=p.module(n);else if(e(v,s)||e(_,s)||e(y,s))T[m]=l(s);else{if(!h.p)throw new Error(n+" missing "+s);h.p.load(h.n,a(o,!0),c(s),{}),T[m]=v[s]}d=i?i.apply(v[n],T):void 0,n&&(u&&u.exports!==t&&u.exports!==v[n]?v[n]=u.exports:d===t&&C||(v[n]=d))}else n&&(v[n]=i)},n=r=m=function(e,n,r,i,o){if("string"==typeof e)return p[e]?p[e](n):l(g(e,f(n)).f);if(!e.splice){if(E=e,E.deps&&m(E.deps,E.callback),!n)return;n.splice?(e=n,n=r,r=null):e=t}return n=n||function(){},"function"==typeof r&&(r=i,i=o),i?h(t,e,n,r):setTimeout(function(){h(t,e,n,r)},4),m},m.config=function(t){return m(t)},n._defined=v,i=function(t,n,r){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");n.splice||(r=n,n=[]),e(v,t)||e(_,t)||(_[t]=[t,n,r])},i.amd={jQuery:!0}}(),i("../node_modules/almond/almond",function(){});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function t(t,e){return t.set(e[0],e[1]),t}function e(t,e){return t.add(e),t}function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function r(t,e,n,r){for(var i=-1,o=t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function a(t,e){for(var n=-1,r=t.length;++n<r&&!1!==e(t[n],n,t););return t}function u(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function c(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function l(t,e){return!!t.length&&-1<E(t,e,0)}function s(t,e,n){for(var r=-1,i=t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function f(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function d(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function h(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function m(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function g(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function p(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(u===M?a===a:n(a,u)))var u=a,c=o}return c}function v(t,e,n,r){var i;return n(t,function(t,n,o){return e(t,n,o)?(i=r?n:t,!1):void 0}),i}function _(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function E(t,e,n){if(e!==e)return B(t,n);--n;for(var r=t.length;++n<r;)if(t[n]===e)return n;return-1}function y(t,e,n,r){--n;for(var i=t.length;++n<i;)if(r(t[n],e))return n;return-1}function C(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function T(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].c;return t}function x(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==M&&(n=n===M?o:n+o)}return n}function b(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function O(t,e){return f(e,function(e){return[e,t[e]]})}function S(t){return function(e){return t(e)}}function I(t,e){return f(e,function(e){return t[e]})}function k(t,e){for(var n=-1,r=t.length;++n<r&&-1<E(e,t[n],0););return n}function R(t,e){for(var n=t.length;n--&&-1<E(e,t[n],0););return n}function w(t){return t&&t.Object===Object?t:null}function D(t,e){if(t!==e){var n=null===t,r=t===M,i=t===t,o=null===e,a=e===M,u=e===e;if(t>e&&!o||!i||n&&!a&&u||r&&u)return 1;if(e>t&&!n||!u||o&&!r&&i||a&&i)return-1}return 0}function A(t){return Lt[t]}function N(t){return jt[t]}function K(t){return"\\"+Pt[t]}function B(t,e,n){var r=t.length;for(e+=n?0:-1;n?e--:++e<r;){var i=t[e];if(i!==i)return e}return-1}function L(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function j(t,e){return t="number"==typeof t||yt.test(t)?+t:-1,t>-1&&0==t%1&&(null==e?9007199254740991:e)>t}function U(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function F(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function P(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&"__lodash_placeholder__"!==a||(t[n]="__lodash_placeholder__",o[i++]=n)}return o}function W(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function H(t){if(!t||!Rt.test(t))return t.length;for(var e=kt.lastIndex=0;kt.test(t);)e++;return e}function $(t){return Ut[t]}function q(i){function w(t){if(br(t)&&!qo(t)&&!(t instanceof Ot)){if(t instanceof bt)return t;if(fi.call(t,"__wrapped__"))return Mn(t)}return new bt(t)}function yt(){}function bt(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=M}function Ot(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function St(){}function Lt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function jt(t){var e=-1,n=t?t.length:0;for(this.__data__=new Lt;++e<n;)this.push(t[e])}function Ut(t,e){var n=t.__data__;return Fn(e)?(n=n.__data__,"__lodash_hash_undefined__"===("string"==typeof e?n.string:n.hash)[e]):n.has(e)}function Ft(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Pt(t,e){var n=qt(t,e);return 0>n?!1:(n==t.length-1?t.pop():Ri.call(t,n,1),!0)}function $t(t,e){var n=qt(t,e);return 0>n?M:t[n][1]}function qt(t,e){for(var n=t.length;n--;)if(mr(t[n][0],e))return n;return-1}function Gt(t,e,n){var r=qt(t,e);0>r?t.push([e,n]):t[r][1]=n}function Xt(t,e,n,r){return t===M||mr(t,li[n])&&!fi.call(r,n)?e:t}function zt(t,e,n){(n===M||mr(t[e],n))&&("number"!=typeof e||n!==M||e in t)||(t[e]=n)}function Yt(t,e,n){var r=t[e];fi.call(t,e)&&mr(r,n)&&(n!==M||e in t)||(t[e]=n)}function Jt(t,e,n,r){return Qi(t,function(t,i,o){e(r,t,n(t),o)}),r}function Qt(t,e){return t&&en(e,Hr(e),t)}function te(t,e){for(var n=-1,r=null==t,i=e.length,o=Array(i);++n<i;)o[n]=r?M:Fr(t,e[n]);return o}function ee(t){return _r(t)?t:[]}function ne(t){return"function"==typeof t?t:Vr}function re(t){return qo(t)?t:qn(t)}function ie(t,e,n){return t===t&&(n!==M&&(t=t>n?n:t),e!==M&&(t=e>t?e:t)),t}function oe(t,e,n,r,i,o,u){var c;if(r&&(c=o?r(t,i,o,u):r(t)),c!==M)return c;if(!xr(t))return t;if(i=qo(t)){if(c=Nn(t),!e)return tn(t,c)}else{var l=Dn(t),s="[object Function]"==l||"[object GeneratorFunction]"==l;if(Mo(t))return Ze(t,e);if("[object Object]"==l||"[object Arguments]"==l||s&&!o){if(L(t))return o?t:{};if(c=Kn(s?{}:t),!e)return c=Qt(c,t),n?rn(t,c):c}else{if(!Bt[l])return o?t:{};c=Bn(t,l,e)}}return u||(u=new Ft),(o=u.get(t))?o:(u.set(t,c),(i?a:me)(t,function(i,o){Yt(c,o,oe(i,e,n,r,o,t,u))}),n&&!i?rn(t,c):c)}function ae(t){var e=Hr(t),n=e.length;return function(r){if(null==r)return!n;for(var i=n;i--;){var o=e[i],a=t[o],u=r[o];if(u===M&&!(o in Object(r))||!a(u))return!1}return!0}}function ue(t){return xr(t)?Si(t):{}}function ce(t,e,n){if("function"!=typeof t)throw new ui("Expected a function");return ki(function(){t.apply(M,n)},e)}function le(t,e,n,r){var i=-1,o=l,a=!0,u=t.length,c=[],d=e.length;if(!u)return c;n&&(e=f(e,S(n))),r?(o=s,a=!1):e.length>=200&&(o=Ut,a=!1,e=new jt(e));t:for(;++i<u;){var h=t[i],m=n?n(h):h;if(a&&m===m){for(var g=d;g--;)if(e[g]===m)continue t;c.push(h)}else o(e,m,r)||c.push(h)}return c}function se(t,e){var n=!0;return Qi(t,function(t,r,i){return n=!!e(t,r,i)}),n}function fe(t,e){var n=[];return Qi(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function de(t,e,n,r){r||(r=[]);for(var i=-1,o=t.length;++i<o;){var a=t[i];e>0&&_r(a)&&(n||qo(a)||pr(a))?e>1?de(a,e-1,n,r):d(r,a):n||(r[r.length]=a)}return r}function he(t,e){return null==t?t:eo(t,e,$r)}function me(t,e){return t&&eo(t,e,Hr)}function ge(t,e){return t&&no(t,e,Hr)}function pe(t,e){return c(e,function(e){return yr(t[e])})}function ve(t,e){e=Un(e,t)?[e+""]:re(e);for(var n=0,r=e.length;null!=t&&r>n;)t=t[e[n++]];return n&&n==r?t:M}function _e(t,e){return fi.call(t,e)||"object"==("undefined"==typeof t?"undefined":o(t))&&e in t&&null===xi(t)}function Ee(t,e){return e in Object(t)}function ye(t,e,n){for(var r=n?s:l,i=t[0].length,o=t.length,a=o,u=Array(o),c=1/0,d=[];a--;){var h=t[a];a&&e&&(h=f(h,S(e))),c=Li(h.length,c),u[a]=n||!e&&(120>i||120>h.length)?M:new jt(a&&h)}var h=t[0],m=-1,g=u[0];t:for(;++m<i&&c>d.length;){var p=h[m],v=e?e(p):p;if(g?!Ut(g,v):!r(d,v,n)){for(a=o;--a;){var _=u[a];if(_?!Ut(_,v):!r(t[a],v,n))continue t}g&&g.push(v),d.push(p)}}return d}function Ce(t,e,n,r){return me(t,function(t,i,o){e(r,n(t),i,o)}),r}function Te(t,e,r){return Un(e,t)||(e=re(e),t=$n(t,e),e=Yn(e)),e=null==t?t:t[e],null==e?M:n(e,t,r)}function xe(t,e,n,r,i){if(t===e)return!0;if(null==t||null==e||!xr(t)&&!br(e))return t!==t&&e!==e;t:{var o=qo(t),a=qo(e),u="[object Array]",c="[object Array]";o||(u=Dn(t),u="[object Arguments]"==u?"[object Object]":u),a||(c=Dn(e),c="[object Arguments]"==c?"[object Object]":c);var l="[object Object]"==u&&!L(t),a="[object Object]"==c&&!L(e);if((c=u==c)&&!l)i||(i=new Ft),t=o||Dr(t)?bn(t,e,xe,n,r,i):On(t,e,u,xe,n,r,i);else{if(!(2&r)&&(o=l&&fi.call(t,"__wrapped__"),u=a&&fi.call(e,"__wrapped__"),o||u)){i||(i=new Ft),t=xe(o?t.value():t,u?e.value():e,n,r,i);break t}if(c)e:if(i||(i=new Ft),o=2&r,u=Hr(t),a=u.length,c=Hr(e).length,a==c||o){for(l=a;l--;){var s=u[l];if(!(o?s in e:_e(e,s))){t=!1;break e}}if(c=i.get(t))t=c==e;else{c=!0,i.set(t,e);for(var f=o;++l<a;){var s=u[l],d=t[s],h=e[s];if(n)var m=o?n(h,d,s,e,t,i):n(d,h,s,t,e,i);if(m===M?d!==h&&!xe(d,h,n,r,i):!m){c=!1;break}f||(f="constructor"==s)}c&&!f&&(n=t.constructor,r=e.constructor,n!=r&&"constructor"in t&&"constructor"in e&&!("function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)&&(c=!1)),i["delete"](t),t=c}}else t=!1;else t=!1}}return t}function be(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var u=n[i];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<o;){var u=n[i],c=u[0],l=t[c],s=u[1];if(a&&u[2]){if(l===M&&!(c in t))return!1}else if(u=new Ft,c=r?r(l,s,c,t,e,u):M,c===M?!xe(s,l,r,3,u):!c)return!1}return!0}function Oe(t){var e="undefined"==typeof t?"undefined":o(t);return"function"==e?t:null==t?Vr:"object"==e?qo(t)?Re(t[0],t[1]):ke(t):ei(t)}function Se(t){t=null==t?t:Object(t);var e,n=[];for(e in t)n.push(e);return n}function Ie(t,e){var n=-1,r=vr(t)?Array(t.length):[];return Qi(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function ke(t){var e=kn(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null==t?!1:t[n]===r&&(r!==M||n in Object(t))}}return function(n){return n===t||be(n,t,e)}}function Re(t,e){return function(n){var r=Fr(n,t);return r===M&&r===e?Wr(n,t):xe(e,r,M,3)}}function we(t,e,n,r,i){if(t!==e){var o=qo(e)||Dr(e)?M:$r(e);a(o||e,function(a,u){if(o&&(u=a,a=e[u]),xr(a)){i||(i=new Ft);var c=u,l=i,s=t[c],f=e[c],d=l.get(f);if(!d){var d=r?r(s,f,c+"",t,e,l):M,h=d===M;h&&(d=f,qo(f)||Dr(f)?qo(s)?d=s:_r(s)?d=tn(s):(h=!1,d=oe(f,!r)):Ir(f)||pr(f)?pr(s)?d=jr(s):!xr(s)||n&&yr(s)?(h=!1,d=oe(f,!r)):d=s:h=!1),l.set(f,d),h&&we(d,f,n,r,l),l["delete"](f)}zt(t,c,d)}else c=r?r(t[u],a,u+"",t,e,i):M,c===M&&(c=a),zt(t,u,c)})}}function De(t,e,n){var r=-1;return e=f(e.length?e:Array(1),In()),t=Ie(t,function(t,n,i){return{a:f(e,function(e){return e(t)}),b:++r,c:t}}),T(t,function(t,e){var r;t:{r=-1;for(var i=t.a,o=e.a,a=i.length,u=n.length;++r<a;){var c=D(i[r],o[r]);if(c){if(r>=u){r=c;break t}r=c*("desc"==n[r]?-1:1);break t}}r=t.b-e.b}return r})}function Ae(t,e){return t=Object(t),h(e,function(e,n){return n in t&&(e[n]=t[n]),e},{})}function Ne(t,e){var n={};return he(t,function(t,r){e(t,r)&&(n[r]=t)}),n}function Ke(t){return function(e){return null==e?M:e[t]}}function Be(t){return function(e){return ve(e,t)}}function Le(t,e,n,r){var i=r?y:E,o=-1,a=e.length,u=t;for(n&&(u=f(t,S(n)));++o<a;)for(var c=0,l=e[o],l=n?n(l):l;-1<(c=i(u,l,c,r));)u!==t&&Ri.call(u,c,1),Ri.call(t,c,1);return t}function je(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(r==n||i!=o){var o=i;if(j(i))Ri.call(t,i,1);else if(Un(i,t))delete t[i];else{var i=re(i),a=$n(t,i);null!=a&&delete a[Yn(i)]}}}return t}function Ue(t,e){return t+Di(Ui()*(e-t+1))}function Fe(t,e,n,r){e=Un(e,t)?[e+""]:re(e);for(var i=-1,o=e.length,a=o-1,u=t;null!=u&&++i<o;){var c=e[i];if(xr(u)){var l=n;if(i!=a){var s=u[c],l=r?r(s,c,u):M;l===M&&(l=null==s?j(e[i+1])?[]:{}:s)}Yt(u,c,l)}u=u[c]}return t}function Pe(t,e,n){var r=-1,i=t.length;for(0>e&&(e=-e>i?0:i+e),n=n>i?i:n,0>n&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0,n=Array(i);++r<i;)n[r]=t[r+e];return n}function We(t,e){var n;return Qi(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function He(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&2147483647>=i){for(;i>r;){var o=r+i>>>1,a=t[o];(n?e>=a:e>a)&&null!==a?r=o+1:i=o}return i}return $e(t,e,Vr,n)}function $e(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,a=e!==e,u=null===e,c=e===M;o>i;){var l=Di((i+o)/2),s=n(t[l]),f=s!==M,d=s===s;(a?d||r:u?d&&f&&(r||null!=s):c?d&&(r||f):null==s?0:r?e>=s:e>s)?i=l+1:o=l}return Li(o,4294967294)}function qe(t,e){for(var n=0,r=t.length,i=t[0],o=e?e(i):i,a=o,u=1,c=[i];++n<r;)i=t[n],o=e?e(i):i,mr(o,a)||(a=o,c[u++]=i);return c}function Me(t,e,n){var r=-1,i=l,o=t.length,a=!0,u=[],c=u;if(n)a=!1,i=s;else if(200>o)c=e?[]:u;else{if(i=e?null:io(t))return W(i);a=!1,i=Ut,c=new jt}t:for(;++r<o;){var f=t[r],d=e?e(f):f;if(a&&d===d){for(var h=c.length;h--;)if(c[h]===d)continue t;e&&c.push(d),u.push(f)}else i(c,d,n)||(c!==u&&c.push(d),u.push(f))}return u}function Ge(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Pe(t,r?0:o,r?o+1:i):Pe(t,r?o+1:0,r?i:o)}function Xe(t,e){var n=t;return n instanceof Ot&&(n=n.value()),h(e,function(t,e){return e.func.apply(e.thisArg,d([t],e.args))},n)}function ze(t,e,n){for(var r=-1,i=t.length;++r<i;)var o=o?d(le(o,t[r],e,n),le(t[r],o,e,n)):t[r];return o&&o.length?Me(o,e,n):[]}function Ye(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;)n(a,t[r],o>r?e[r]:M);return a}function Ze(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}function Ve(t){var e=new t.constructor(t.byteLength);return new yi(e).set(new yi(t)),e}function Je(t,e,n,r){var i=-1,o=t.length,a=n.length,u=-1,c=e.length,l=Bi(o-a,0),s=Array(c+l);for(r=!r;++u<c;)s[u]=e[u];for(;++i<a;)(r||o>i)&&(s[n[i]]=t[i]);for(;l--;)s[u++]=t[i++];return s}function Qe(t,e,n,r){var i=-1,o=t.length,a=-1,u=n.length,c=-1,l=e.length,s=Bi(o-u,0),f=Array(s+l);for(r=!r;++i<s;)f[i]=t[i];for(s=i;++c<l;)f[s+c]=e[c];for(;++a<u;)(r||o>i)&&(f[s+n[a]]=t[i++]);return f}function tn(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function en(t,e,n){return nn(t,e,n)}function nn(t,e,n,r){n||(n={});for(var i=-1,o=e.length;++i<o;){var a=e[i],u=r?r(n[a],t[a],a,n,t):t[a];Yt(n,a,u)}return n}function rn(t,e){return en(t,uo(t),e)}function on(t,e){return function(n,i){var o=qo(n)?r:Jt,a=e?e():{};return o(n,t,In(i),a)}}function an(t){return hr(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:M,a=i>2?n[2]:M,o="function"==typeof o?(i--,o):M;for(a&&jn(n[0],n[1],a)&&(o=3>i?M:o,i=1),e=Object(e);++r<i;)(a=n[r])&&t(e,a,r,o);return e})}function un(t,e){return function(n,r){if(null==n)return n;if(!vr(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function cn(t){return function(e,n,r){var i=-1,o=Object(e);r=r(e);for(var a=r.length;a--;){var u=r[t?a:++i];if(!1===n(o[u],u,o))break}return e}}function ln(t,e,n){function r(){return(this&&this!==Zt&&this instanceof r?o:t).apply(i?n:this,arguments)}var i=1&e,o=dn(t);return r}function sn(t){return function(e){e=Ur(e);var n=Rt.test(e)?e.match(kt):M,r=n?n[0]:e.charAt(0);return e=n?n.slice(1).join(""):e.slice(1),r[t]()+e}}function fn(t){return function(e){return h(Yr(Xr(e)),t,"")}}function dn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=ue(t.prototype),e=t.apply(n,e);return xr(e)?e:n}}function hn(t,e,r){function i(){for(var a=arguments.length,u=Array(a),c=a,l=wn(i);c--;)u[c]=arguments[c];return c=3>a&&u[0]!==l&&u[a-1]!==l?[]:P(u,l),a-=c.length,r>a?Cn(t,e,gn,i.placeholder,M,u,c,M,M,r-a):n(this&&this!==Zt&&this instanceof i?o:t,this,u)}var o=dn(t);return i}function mn(t){return hr(function(e){e=de(e,1);var n=e.length,r=n,i=bt.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new ui("Expected a function");if(i&&!a&&"wrapper"==Sn(o))var a=new bt([],!0)}for(r=a?r:n;++r<n;)var o=e[r],i=Sn(o),u="wrapper"==i?oo(o):M,a=u&&Pn(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?a[Sn(u[0])].apply(a,u[3]):1==o.length&&Pn(o)?a[i]():a.thru(o);return function(){var t=arguments,r=t[0];if(a&&1==t.length&&qo(r)&&r.length>=200)return a.plant(r).value();for(var i=0,t=n?e[i].apply(this,t):r;++i<n;)t=e[i].call(this,t);return t}})}function gn(t,e,n,r,i,o,a,u,c,l){function s(){for(var v=arguments.length,_=v,E=Array(v);_--;)E[_]=arguments[_];if(m){var y,C=wn(s),_=E.length;for(y=0;_--;)E[_]===C&&y++}if(r&&(E=Je(E,r,i,m)),o&&(E=Qe(E,o,a,m)),v-=y,m&&l>v)return C=P(E,C),Cn(t,e,gn,s.placeholder,n,E,C,u,c,l-v);if(C=d?n:this,_=h?C[t]:t,v=E.length,u){y=E.length;for(var T=Li(u.length,y),x=tn(E);T--;){var b=u[T];E[T]=j(b,y)?x[b]:M}}else g&&v>1&&E.reverse();return f&&v>c&&(E.length=c),this&&this!==Zt&&this instanceof s&&(_=p||dn(_)),_.apply(C,E)}var f=128&e,d=1&e,h=2&e,m=24&e,g=512&e,p=h?M:dn(t);return s}function pn(t,e){return function(n,r){return Ce(n,t,e(r),{})}}function vn(t){return hr(function(e){return e=f(de(e,1),In()),hr(function(r){var i=this;return t(e,function(t){return n(t,i,r)})})})}function _n(t,e,n){return e=Kr(e),t=H(t),e&&e>t?(e-=t,n=n===M?" ":n+"",t=zr(n,wi(e/H(n))),Rt.test(n)?t.match(kt).slice(0,e).join(""):t.slice(0,e)):""}function En(t,e,r,i){function o(){for(var e=-1,c=arguments.length,l=-1,s=i.length,f=Array(s+c),d=this&&this!==Zt&&this instanceof o?u:t;++l<s;)f[l]=i[l];for(;c--;)f[l++]=arguments[++e];return n(d,a?r:this,f)}var a=1&e,u=dn(t);return o}function yn(t){return function(e,n,r){r&&"number"!=typeof r&&jn(e,n,r)&&(n=r=M),e=Lr(e),e=e===e?e:0,n===M?(n=e,e=0):n=Lr(n)||0,r=r===M?n>e?1:-1:Lr(r)||0;var i=-1;n=Bi(wi((n-e)/(r||1)),0);for(var o=Array(n);n--;)o[t?n:++i]=e,e+=r;return o}}function Cn(t,e,n,r,i,o,a,u,c,l){var s=8&e;u=u?tn(u):M;var f=s?a:M;a=s?M:a;var d=s?o:M;return o=s?M:o,e=(e|(s?32:64))&~(s?64:32),4&e||(e&=-4),e=[t,e,i,d,f,o,a,u,c,l],n=n.apply(M,e),Pn(t)&&co(n,e),n.placeholder=r,n}function Tn(t){var e=oi[t];return function(t,n){if(t=Lr(t),n=Kr(n)){var r=(Ur(t)+"e").split("e"),r=e(r[0]+"e"+(+r[1]+n)),r=(Ur(r)+"e").split("e");return+(r[0]+"e"+(+r[1]-n))}return e(t)}}function xn(t,e,n,r,i,o,a,u){var c=2&e;if(!c&&"function"!=typeof t)throw new ui("Expected a function");var l=r?r.length:0;if(l||(e&=-97,r=i=M),a=a===M?a:Bi(Kr(a),0),u=u===M?u:Kr(u),l-=i?i.length:0,64&e){var s=r,f=i;r=i=M}var d=c?M:oo(t);return o=[t,e,n,r,i,s,f,o,a,u],d&&(n=o[1],t=d[1],e=n|t,r=128==t&&8==n||128==t&&256==n&&d[8]>=o[7].length||384==t&&d[8]>=d[7].length&&8==n,131>e||r)&&(1&t&&(o[2]=d[2],e|=1&n?0:4),(n=d[3])&&(r=o[3],o[3]=r?Je(r,n,d[4]):tn(n),o[4]=r?P(o[3],"__lodash_placeholder__"):tn(d[4])),(n=d[5])&&(r=o[5],o[5]=r?Qe(r,n,d[6]):tn(n),o[6]=r?P(o[5],"__lodash_placeholder__"):tn(d[6])),(n=d[7])&&(o[7]=tn(n)),128&t&&(o[8]=null==o[8]?d[8]:Li(o[8],d[8])),null==o[9]&&(o[9]=d[9]),o[0]=d[0],o[1]=e),t=o[0],e=o[1],n=o[2],r=o[3],i=o[4],u=o[9]=null==o[9]?c?0:t.length:Bi(o[9]-l,0),!u&&24&e&&(e&=-25),c=e&&1!=e?8==e||16==e?hn(t,e,u):32!=e&&33!=e||i.length?gn.apply(M,o):En(t,e,n,r):ln(t,e,n),(d?ro:co)(c,o)}function bn(t,e,n,r,i,o){var a=-1,u=2&i,c=1&i,l=t.length,s=e.length;if(!(l==s||u&&s>l))return!1;if(s=o.get(t))return s==e;for(s=!0,o.set(t,e);++a<l;){var f=t[a],d=e[a];if(r)var h=u?r(d,f,a,e,t,o):r(f,d,a,t,e,o);if(h!==M){if(h)continue;s=!1;break}if(c){if(!g(e,function(t){return f===t||n(f,t,r,i,o)})){s=!1;break}}else if(f!==d&&!n(f,d,r,i,o)){s=!1;break}}return o["delete"](t),s}function On(t,e,n,r,i,o,a){switch(n){case"[object ArrayBuffer]":if(t.byteLength!=e.byteLength||!r(new yi(t),new yi(e)))break;return!0;case"[object Boolean]":case"[object Date]":return+t==+e;case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object Number]":return t!=+t?e!=+e:t==+e;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var u=F;case"[object Set]":if(u||(u=W),t.size!=e.size&&!(2&o))break;return(n=a.get(t))?n==e:bn(u(t),u(e),r,i,1|o,a.set(t,e));case"[object Symbol]":if(Vi)return Vi.call(t)==Vi.call(e)}return!1}function Sn(t){for(var e=t.name+"",n=Gi[e],r=fi.call(Gi,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function In(){var t=w.iteratee||Jr,t=t===Jr?Oe:t;return arguments.length?t(arguments[0],arguments[1]):t}function kn(t){t=qr(t);for(var e=t.length;e--;){var n,r=t[e];n=t[e][1],n=n===n&&!xr(n),r[2]=n}return t}function Rn(t,e){var n=t[e];return Or(n)?n:M}function wn(t){return(fi.call(w,"placeholder")?w:t).placeholder}function Dn(t){return mi.call(t)}function An(t,e,n){if(null==t)return!1;var r=n(t,e);return r||Un(e)||(e=re(e),t=$n(t,e),null!=t&&(e=Yn(e),r=n(t,e))),n=t?t.length:M,r||!!n&&Tr(n)&&j(e,n)&&(qo(t)||Rr(t)||pr(t))}function Nn(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&fi.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Kn(t){return"function"!=typeof t.constructor||Wn(t)?{}:ue(xi(t))}function Bn(n,r,i){var o=n.constructor;switch(r){case"[object ArrayBuffer]":return Ve(n);case"[object Boolean]":case"[object Date]":return new o(+n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return r=i?Ve(n.buffer):n.buffer,new n.constructor(r,n.byteOffset,n.length);case"[object Map]":return h(F(n),t,new n.constructor);case"[object Number]":case"[object String]":return new o(n);case"[object RegExp]":return r=new n.constructor(n.source,mt.exec(n)),r.lastIndex=n.lastIndex,r;case"[object Set]":return h(W(n),e,new n.constructor);case"[object Symbol]":return Vi?Object(Vi.call(n)):{}}}function Ln(t){var e=t?t.length:M;return Tr(e)&&(qo(t)||Rr(t)||pr(t))?b(e,String):null}function jn(t,e,n){if(!xr(n))return!1;var r="undefined"==typeof e?"undefined":o(e);return("number"==r?vr(n)&&j(e,n.length):"string"==r&&e in n)?mr(n[e],t):!1}function Un(t,e){return"number"==typeof t?!0:!qo(t)&&(ot.test(t)||!it.test(t)||null!=e&&t in Object(e))}function Fn(t){var e="undefined"==typeof t?"undefined":o(t);return"number"==e||"boolean"==e||"string"==e&&"__proto__"!=t||null==t}function Pn(t){var e=Sn(t),n=w[e];return"function"==typeof n&&e in Ot.prototype?t===n?!0:(e=oo(n),!!e&&t===e[0]):!1}function Wn(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||li)}function Hn(t,e,n,r,i,o){return xr(t)&&xr(e)&&we(t,e,M,Hn,o.set(e,t)),t}function $n(t,e){return 1==e.length?t:Fr(t,Pe(e,0,-1))}function qn(t){var e=[];return Ur(t).replace(at,function(t,n,r,i){e.push(r?i.replace(dt,"$1"):n||t)}),e}function Mn(t){if(t instanceof Ot)return t.clone();var e=new bt(t.__wrapped__,t.__chain__);return e.__actions__=tn(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Gn(t,e,n){var r=t?t.length:0;return r?(e=n||e===M?1:Kr(e),Pe(t,0>e?0:e,r)):[]}function Xn(t,e,n){var r=t?t.length:0;return r?(e=n||e===M?1:Kr(e),e=r-e,Pe(t,0,0>e?0:e)):[]}function zn(t){return t?t[0]:M}function Yn(t){var e=t?t.length:0;return e?t[e-1]:M}function Zn(t,e){return t&&t.length&&e&&e.length?Le(t,e):t}function Vn(t){return t?Fi.call(t):t}function Jn(t){if(!t||!t.length)return[];var e=0;return t=c(t,function(t){return _r(t)?(e=Bi(t.length,e),!0):void 0}),b(e,function(e){return f(t,Ke(e))})}function Qn(t,e){if(!t||!t.length)return[];var r=Jn(t);return null==e?r:f(r,function(t){return n(e,M,t)})}function tr(t){return t=w(t),t.__chain__=!0,t}function er(t,e){return e(t)}function nr(){return this}function rr(t,e){return"function"==typeof e&&qo(t)?a(t,e):Qi(t,ne(e))}function ir(t,e){var n;if("function"==typeof e&&qo(t)){for(n=t.length;n--&&!1!==e(t[n],n,t););n=t}else n=to(t,ne(e));return n}function or(t,e){return(qo(t)?f:Ie)(t,In(e,3))}function ar(t,e){var n=-1,r=Nr(t),i=r.length,o=i-1;for(e=ie(Kr(e),0,i);++n<e;){var i=Ue(n,o),a=r[i];r[i]=r[n],r[n]=a}return r.length=e,r}function ur(t,e,n){return e=n?M:e,e=t&&null==e?t.length:e,xn(t,128,M,M,M,M,e)}function cr(t,e){var n;if("function"!=typeof e)throw new ui("Expected a function");return t=Kr(t),function(){return 0<--t&&(n=e.apply(this,arguments)),1>=t&&(e=M),n}}function lr(t,e,n){return e=n?M:e,t=xn(t,8,M,M,M,M,M,e),t.placeholder=lr.placeholder,t}function sr(t,e,n){return e=n?M:e,t=xn(t,16,M,M,M,M,M,e),t.placeholder=sr.placeholder,t}function fr(t,e,n){function r(){h&&Ci(h),l&&Ci(l),g=0,c=l=d=h=m=M}function i(e,n){n&&Ci(n),l=h=m=M,e&&(g=Bo(),s=t.apply(d,c),h||l||(c=d=M))}function o(){var t=e-(Bo()-f);0>=t||t>e?i(m,l):h=ki(o,t)}function a(){i(_,h)}function u(){if(c=arguments,f=Bo(),d=this,m=_&&(h||!p),!1===v)var n=p&&!h;else{g||l||p||(g=f);var r=v-(f-g),i=(0>=r||r>v)&&(p||l);i?(l&&(l=Ci(l)),g=f,s=t.apply(d,c)):l||(l=ki(a,r))}return i&&h?h=Ci(h):h||e===v||(h=ki(o,e)),n&&(i=!0,s=t.apply(d,c)),!i||h||l||(c=d=M),s}var c,l,s,f,d,h,m,g=0,p=!1,v=!1,_=!0;if("function"!=typeof t)throw new ui("Expected a function");return e=Lr(e)||0,xr(n)&&(p=!!n.leading,v="maxWait"in n&&Bi(Lr(n.maxWait)||0,e),_="trailing"in n?!!n.trailing:_),u.cancel=r,u.flush=function(){return(h&&m||l&&_)&&(s=t.apply(d,c)),r(),s},u}function dr(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new ui("Expected a function");var n=function r(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;return o.has(i)?o.get(i):(n=t.apply(this,n),r.cache=o.set(i,n),n)};return n.cache=new dr.Cache,n}function hr(t,e){if("function"!=typeof t)throw new ui("Expected a function");return e=Bi(e===M?t.length-1:Kr(e),0),function(){for(var r=arguments,i=-1,o=Bi(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,r[0],a);case 2:return t.call(this,r[0],r[1],a)}for(o=Array(e+1),i=-1;++i<e;)o[i]=r[i];return o[e]=a,n(t,this,o)}}function mr(t,e){return t===e||t!==t&&e!==e}function gr(t,e){return t>e}function pr(t){return _r(t)&&fi.call(t,"callee")&&(!Ii.call(t,"callee")||"[object Arguments]"==mi.call(t))}function vr(t){return null!=t&&Tr(ao(t))&&!yr(t)}function _r(t){return br(t)&&vr(t)}function Er(t){return br(t)?"[object Error]"==mi.call(t)||"string"==typeof t.message&&"string"==typeof t.name:!1}function yr(t){return t=xr(t)?mi.call(t):"","[object Function]"==t||"[object GeneratorFunction]"==t}function Cr(t){return"number"==typeof t&&t==Kr(t)}function Tr(t){return"number"==typeof t&&t>-1&&0==t%1&&9007199254740991>=t}function xr(t){var e="undefined"==typeof t?"undefined":o(t);return!!t&&("object"==e||"function"==e)}function br(t){return!!t&&"object"==("undefined"==typeof t?"undefined":o(t))}function Or(t){return null==t?!1:yr(t)?pi.test(si.call(t)):br(t)&&(L(t)?pi:_t).test(t)}function Sr(t){return"number"==typeof t||br(t)&&"[object Number]"==mi.call(t)}function Ir(t){return!br(t)||"[object Object]"!=mi.call(t)||L(t)?!1:(t=xi(t),null===t?!0:(t=t.constructor,"function"==typeof t&&t instanceof t&&si.call(t)==hi))}function kr(t){return xr(t)&&"[object RegExp]"==mi.call(t)}function Rr(t){return"string"==typeof t||!qo(t)&&br(t)&&"[object String]"==mi.call(t)}function wr(t){return"symbol"==("undefined"==typeof t?"undefined":o(t))||br(t)&&"[object Symbol]"==mi.call(t)}function Dr(t){return br(t)&&Tr(t.length)&&!!Kt[mi.call(t)]}function Ar(t,e){return e>t}function Nr(t){if(!t)return[];if(vr(t))return Rr(t)?t.match(kt):tn(t);if(Oi&&t[Oi])return U(t[Oi]());var e=Dn(t);return("[object Map]"==e?F:"[object Set]"==e?W:Mr)(t)}function Kr(t){if(!t)return 0===t?t:0;if(t=Lr(t),t===G||t===-G)return 1.7976931348623157e308*(0>t?-1:1);var e=t%1;return t===t?e?t-e:t:0}function Br(t){return t?ie(Kr(t),0,4294967295):0}function Lr(t){if(xr(t)&&(t=yr(t.valueOf)?t.valueOf():t,t=xr(t)?t+"":t),"string"!=typeof t)return 0===t?t:+t;t=t.replace(lt,"");var e=vt.test(t);return e||Et.test(t)?Ht(t.slice(2),e?2:8):pt.test(t)?X:+t}function jr(t){return en(t,$r(t))}function Ur(t){if("string"==typeof t)return t;if(null==t)return"";if(wr(t))return Ji?Ji.call(t):"";var e=t+"";return"0"==e&&1/t==-G?"-0":e}function Fr(t,e,n){return t=null==t?M:ve(t,e),t===M?n:t}function Pr(t,e){return An(t,e,_e)}function Wr(t,e){return An(t,e,Ee)}function Hr(t){var e=Wn(t);if(!e&&!vr(t))return Ki(Object(t));var n,r=Ln(t),i=!!r,r=r||[],o=r.length;for(n in t)!_e(t,n)||i&&("length"==n||j(n,o))||e&&"constructor"==n||r.push(n);return r}function $r(t){for(var e=-1,n=Wn(t),r=Se(t),i=r.length,o=Ln(t),a=!!o,o=o||[],u=o.length;++e<i;){var c=r[e];a&&("length"==c||j(c,u))||"constructor"==c&&(n||!fi.call(t,c))||o.push(c)}return o}function qr(t){return O(t,Hr(t))}function Mr(t){return t?I(t,Hr(t)):[]}function Gr(t){return sa(Ur(t).toLowerCase())}function Xr(t){return(t=Ur(t))&&t.replace(Ct,A).replace(It,"")}function zr(t,e){t=Ur(t),e=Kr(e);var n="";if(!t||1>e||e>9007199254740991)return n;do e%2&&(n+=t),e=Di(e/2),t+=t;while(e);return n}function Yr(t,e,n){return t=Ur(t),e=n?M:e,e===M&&(e=At.test(t)?Dt:wt),t.match(e)||[]}function Zr(t){return function(){return t}}function Vr(t){return t}function Jr(t){return Oe("function"==typeof t?t:oe(t,!0))}function Qr(t,e,n){var r=Hr(e),i=pe(e,r);null!=n||xr(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=pe(e,Hr(e)));var o=xr(n)&&"chain"in n?n.chain:!0,u=yr(t);return a(i,function(n){
var r=e[n];t[n]=r,u&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=tn(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,d([this.value()],arguments))})}),t}function ti(){}function ei(t){return Un(t)?Ke(t):Be(t)}function ni(t){return t&&t.length?x(t,Vr):0}i=i?Vt.defaults({},i,Vt.pick(Zt,Nt)):Zt;var ri=i.Date,ii=i.Error,oi=i.Math,ai=i.RegExp,ui=i.TypeError,ci=i.Array.prototype,li=i.Object.prototype,si=i.Function.prototype.toString,fi=li.hasOwnProperty,di=0,hi=si.call(Object),mi=li.toString,gi=Zt._,pi=ai("^"+si.call(fi).replace(ut,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vi=Mt?i.Buffer:M,_i=i.Reflect,Ei=i.Symbol,yi=i.Uint8Array,Ci=i.clearTimeout,Ti=_i?_i.enumerate:M,xi=Object.getPrototypeOf,bi=Object.getOwnPropertySymbols,Oi="symbol"==o(Oi=Ei&&Ei.iterator)?Oi:M,Si=Object.create,Ii=li.propertyIsEnumerable,ki=i.setTimeout,Ri=ci.splice,wi=oi.ceil,Di=oi.floor,Ai=i.isFinite,Ni=ci.join,Ki=Object.keys,Bi=oi.max,Li=oi.min,ji=i.parseInt,Ui=oi.random,Fi=ci.reverse,Pi=Rn(i,"Map"),Wi=Rn(i,"Set"),Hi=Rn(i,"WeakMap"),$i=Rn(Object,"create"),qi=Hi&&new Hi,Mi=!Ii.call({valueOf:1},"valueOf"),Gi={},Xi=Pi?si.call(Pi):"",zi=Wi?si.call(Wi):"",Yi=Hi?si.call(Hi):"",Zi=Ei?Ei.prototype:M,Vi=Zi?Zi.valueOf:M,Ji=Zi?Zi.toString:M;w.templateSettings={escape:et,evaluate:nt,interpolate:rt,variable:"",imports:{_:w}};var Qi=un(me),to=un(ge,!0),eo=cn(),no=cn(!0);Ti&&!Ii.call({valueOf:1},"valueOf")&&(Se=function(t){return U(Ti(t))});var ro=qi?function(t,e){return qi.set(t,e),t}:Vr,io=Wi&&2===new Wi([1,2]).size?function(t){return new Wi(t)}:ti,oo=qi?function(t){return qi.get(t)}:ti,ao=Ke("length"),uo=bi||function(){return[]};(Pi&&"[object Map]"!=Dn(new Pi)||Wi&&"[object Set]"!=Dn(new Wi)||Hi&&"[object WeakMap]"!=Dn(new Hi))&&(Dn=function(t){var e=mi.call(t);if(t="[object Object]"==e?t.constructor:null,t="function"==typeof t?si.call(t):"")switch(t){case Xi:return"[object Map]";case zi:return"[object Set]";case Yi:return"[object WeakMap]"}return e});var co=function(){var t=0,e=0;return function(n,r){var i=Bo(),o=16-(i-e);if(e=i,o>0){if(150<=++t)return n}else t=0;return ro(n,r)}}(),lo=hr(function(t,e){qo(t)||(t=null==t?[]:[Object(t)]),e=de(e,1);for(var n=t,r=e,i=-1,o=n.length,a=-1,u=r.length,c=Array(o+u);++i<o;)c[i]=n[i];for(;++a<u;)c[i++]=r[a];return c}),so=hr(function(t,e){return _r(t)?le(t,de(e,1,!0)):[]}),fo=hr(function(t,e){var n=Yn(e);return _r(n)&&(n=M),_r(t)?le(t,de(e,1,!0),In(n)):[]}),ho=hr(function(t,e){var n=Yn(e);return _r(n)&&(n=M),_r(t)?le(t,de(e,1,!0),M,n):[]}),mo=hr(function(t){var e=f(t,ee);return e.length&&e[0]===t[0]?ye(e):[]}),go=hr(function(t){var e=Yn(t),n=f(t,ee);return e===Yn(n)?e=M:n.pop(),n.length&&n[0]===t[0]?ye(n,In(e)):[]}),po=hr(function(t){var e=Yn(t),n=f(t,ee);return e===Yn(n)?e=M:n.pop(),n.length&&n[0]===t[0]?ye(n,M,e):[]}),vo=hr(Zn),_o=hr(function(t,e){e=f(de(e,1),String);var n=te(t,e);return je(t,e.sort(D)),n}),Eo=hr(function(t){return Me(de(t,1,!0))}),yo=hr(function(t){var e=Yn(t);return _r(e)&&(e=M),Me(de(t,1,!0),In(e))}),Co=hr(function(t){var e=Yn(t);return _r(e)&&(e=M),Me(de(t,1,!0),M,e)}),To=hr(function(t,e){return _r(t)?le(t,e):[]}),xo=hr(function(t){return ze(c(t,_r))}),bo=hr(function(t){var e=Yn(t);return _r(e)&&(e=M),ze(c(t,_r),In(e))}),Oo=hr(function(t){var e=Yn(t);return _r(e)&&(e=M),ze(c(t,_r),M,e)}),So=hr(Jn),Io=hr(function(t){var e=t.length,e=e>1?t[e-1]:M,e="function"==typeof e?(t.pop(),e):M;return Qn(t,e)}),ko=hr(function(t){t=de(t,1);var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return te(e,t)};return 1>=e&&!this.__actions__.length&&r instanceof Ot&&j(n)?(r=r.slice(n,+n+(e?1:0)),r.__actions__.push({func:er,args:[i],thisArg:M}),new bt(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(M),t})):this.thru(i)}),Ro=on(function(t,e,n){fi.call(t,n)?++t[n]:t[n]=1}),wo=on(function(t,e,n){fi.call(t,n)?t[n].push(e):t[n]=[e]}),Do=hr(function(t,e,r){var i=-1,o="function"==typeof e,a=Un(e),u=vr(t)?Array(t.length):[];return Qi(t,function(t){var c=o?e:a&&null!=t?t[e]:M;u[++i]=c?n(c,t,r):Te(t,e,r)}),u}),Ao=on(function(t,e,n){t[n]=e}),No=on(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Ko=hr(function(t,e){if(null==t)return[];var n=e.length;return n>1&&jn(t,e[0],e[1])?e=[]:n>2&&jn(e[0],e[1],e[2])&&(e.length=1),De(t,de(e,1),[])}),Bo=ri.now,Lo=hr(function(t,e,n){var r=1;if(n.length)var i=P(n,wn(Lo)),r=32|r;return xn(t,r,e,n,i)}),jo=hr(function(t,e,n){var r=3;if(n.length)var i=P(n,wn(jo)),r=32|r;return xn(e,r,t,n,i)}),Uo=hr(function(t,e){return ce(t,1,e)}),Fo=hr(function(t,e,n){return ce(t,Lr(e)||0,n)}),Po=hr(function(t,e){e=f(de(e,1),In());var r=e.length;return hr(function(i){for(var o=-1,a=Li(i.length,r);++o<a;)i[o]=e[o].call(this,i[o]);return n(t,this,i)})}),Wo=hr(function(t,e){var n=P(e,wn(Wo));return xn(t,32,M,e,n)}),Ho=hr(function(t,e){var n=P(e,wn(Ho));return xn(t,64,M,e,n)}),$o=hr(function(t,e){return xn(t,256,M,M,M,de(e,1))}),qo=Array.isArray,Mo=vi?function(t){return t instanceof vi}:Zr(!1),Go=an(function(t,e){if(Mi||Wn(e)||vr(e))en(e,Hr(e),t);else for(var n in e)fi.call(e,n)&&Yt(t,n,e[n])}),Xo=an(function(t,e){if(Mi||Wn(e)||vr(e))en(e,$r(e),t);else for(var n in e)Yt(t,n,e[n])}),zo=an(function(t,e,n,r){nn(e,$r(e),t,r)}),Yo=an(function(t,e,n,r){nn(e,Hr(e),t,r)}),Zo=hr(function(t,e){return te(t,de(e,1))}),Vo=hr(function(t){return t.push(M,Xt),n(zo,M,t)}),Jo=hr(function(t){return t.push(M,Hn),n(ra,M,t)}),Qo=pn(function(t,e,n){t[e]=n},Zr(Vr)),ta=pn(function(t,e,n){fi.call(t,e)?t[e].push(n):t[e]=[n]},In),ea=hr(Te),na=an(function(t,e,n){we(t,e,n)}),ra=an(function(t,e,n,r){we(t,e,n,r)}),ia=hr(function(t,e){return null==t?{}:(e=f(de(e,1),String),Ae(t,le($r(t),e)))}),oa=hr(function(t,e){return null==t?{}:Ae(t,de(e,1))}),aa=fn(function(t,e,n){return e=e.toLowerCase(),t+(n?Gr(e):e)}),ua=fn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),ca=fn(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),la=sn("toLowerCase"),sa=sn("toUpperCase"),fa=fn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),da=fn(function(t,e,n){return t+(n?" ":"")+Gr(e)}),ha=fn(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),ma=hr(function(t,e){try{return n(t,M,e)}catch(r){return Er(r)?r:new ii(r)}}),ga=hr(function(t,e){return a(de(e,1),function(e){t[e]=Lo(t[e],t)}),t}),pa=mn(),va=mn(!0),_a=hr(function(t,e){return function(n){return Te(n,t,e)}}),Ea=hr(function(t,e){return function(n){return Te(t,n,e)}}),ya=vn(f),Ca=vn(u),Ta=vn(g),xa=yn(),ba=yn(!0),Oa=Tn("ceil"),Sa=Tn("floor"),Ia=Tn("round");return w.prototype=yt.prototype,w.prototype.constructor=w,bt.prototype=ue(yt.prototype),bt.prototype.constructor=bt,Ot.prototype=ue(yt.prototype),Ot.prototype.constructor=Ot,St.prototype=$i?$i(null):li,Lt.prototype.clear=function(){this.__data__={hash:new St,map:Pi?new Pi:[],string:new St}},Lt.prototype["delete"]=function(t){var e=this.__data__;return Fn(t)?(e="string"==typeof t?e.string:e.hash,($i?e[t]!==M:fi.call(e,t))&&delete e[t]):Pi?e.map["delete"](t):Pt(e.map,t)},Lt.prototype.get=function(t){var e=this.__data__;return Fn(t)?(e="string"==typeof t?e.string:e.hash,$i?(t=e[t],t="__lodash_hash_undefined__"===t?M:t):t=fi.call(e,t)?e[t]:M,t):Pi?e.map.get(t):$t(e.map,t)},Lt.prototype.has=function(t){var e=this.__data__;return Fn(t)?(e="string"==typeof t?e.string:e.hash,t=$i?e[t]!==M:fi.call(e,t)):t=Pi?e.map.has(t):-1<qt(e.map,t),t},Lt.prototype.set=function(t,e){var n=this.__data__;return Fn(t)?("string"==typeof t?n.string:n.hash)[t]=$i&&e===M?"__lodash_hash_undefined__":e:Pi?n.map.set(t,e):Gt(n.map,t,e),this},jt.prototype.push=function(t){var e=this.__data__;Fn(t)?(e=e.__data__,("string"==typeof t?e.string:e.hash)[t]="__lodash_hash_undefined__"):e.set(t,"__lodash_hash_undefined__")},Ft.prototype.clear=function(){this.__data__={array:[],map:null}},Ft.prototype["delete"]=function(t){var e=this.__data__,n=e.array;return n?Pt(n,t):e.map["delete"](t)},Ft.prototype.get=function(t){var e=this.__data__,n=e.array;return n?$t(n,t):e.map.get(t)},Ft.prototype.has=function(t){var e=this.__data__,n=e.array;return n?-1<qt(n,t):e.map.has(t)},Ft.prototype.set=function(t,e){var n=this.__data__,r=n.array;return r&&(199>r.length?Gt(r,t,e):(n.array=null,n.map=new Lt(r))),(n=n.map)&&n.set(t,e),this},dr.Cache=Lt,w.after=function(t,e){if("function"!=typeof e)throw new ui("Expected a function");return t=Kr(t),function(){return 1>--t?e.apply(this,arguments):void 0}},w.ary=ur,w.assign=Go,w.assignIn=Xo,w.assignInWith=zo,w.assignWith=Yo,w.at=Zo,w.before=cr,w.bind=Lo,w.bindAll=ga,w.bindKey=jo,w.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return qo(t)?t:[t]},w.chain=tr,w.chunk=function(t,e){e=Bi(Kr(e),0);var n=t?t.length:0;if(!n||1>e)return[];for(var r=0,i=0,o=Array(wi(n/e));n>r;)o[i++]=Pe(t,r,r+=e);return o},w.compact=function(t){for(var e=-1,n=t?t.length:0,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},w.concat=lo,w.cond=function(t){var e=t?t.length:0,r=In();return t=e?f(t,function(t){if("function"!=typeof t[1])throw new ui("Expected a function");return[r(t[0]),t[1]]}):[],hr(function(r){for(var i=-1;++i<e;){var o=t[i];if(n(o[0],this,r))return n(o[1],this,r)}})},w.conforms=function(t){return ae(oe(t,!0))},w.constant=Zr,w.countBy=Ro,w.create=function(t,e){var n=ue(t);return e?Qt(n,e):n},w.curry=lr,w.curryRight=sr,w.debounce=fr,w.defaults=Vo,w.defaultsDeep=Jo,w.defer=Uo,w.delay=Fo,w.difference=so,w.differenceBy=fo,w.differenceWith=ho,w.drop=Gn,w.dropRight=Xn,w.dropRightWhile=function(t,e){return t&&t.length?Ge(t,In(e,3),!0,!0):[]},w.dropWhile=function(t,e){return t&&t.length?Ge(t,In(e,3),!0):[]},w.fill=function(t,e,n,r){var i=t?t.length:0;if(!i)return[];for(n&&"number"!=typeof n&&jn(t,e,n)&&(n=0,r=i),i=t.length,n=Kr(n),0>n&&(n=-n>i?0:i+n),r=r===M||r>i?i:Kr(r),0>r&&(r+=i),r=n>r?0:Br(r);r>n;)t[n++]=e;return t},w.filter=function(t,e){return(qo(t)?c:fe)(t,In(e,3))},w.flatMap=function(t,e){return de(or(t,e),1)},w.flatten=function(t){return t&&t.length?de(t,1):[]},w.flattenDeep=function(t){return t&&t.length?de(t,G):[]},w.flattenDepth=function(t,e){return t&&t.length?(e=e===M?1:Kr(e),de(t,e)):[]},w.flip=function(t){return xn(t,512)},w.flow=pa,w.flowRight=va,w.fromPairs=function(t){for(var e=-1,n=t?t.length:0,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},w.functions=function(t){return null==t?[]:pe(t,Hr(t))},w.functionsIn=function(t){return null==t?[]:pe(t,$r(t))},w.groupBy=wo,w.initial=function(t){return Xn(t,1)},w.intersection=mo,w.intersectionBy=go,w.intersectionWith=po,w.invert=Qo,w.invertBy=ta,w.invokeMap=Do,w.iteratee=Jr,w.keyBy=Ao,w.keys=Hr,w.keysIn=$r,w.map=or,w.mapKeys=function(t,e){var n={};return e=In(e,3),me(t,function(t,r,i){n[e(t,r,i)]=t}),n},w.mapValues=function(t,e){var n={};return e=In(e,3),me(t,function(t,r,i){n[r]=e(t,r,i)}),n},w.matches=function(t){return ke(oe(t,!0))},w.matchesProperty=function(t,e){return Re(t,oe(e,!0))},w.memoize=dr,w.merge=na,w.mergeWith=ra,w.method=_a,w.methodOf=Ea,w.mixin=Qr,w.negate=function(t){if("function"!=typeof t)throw new ui("Expected a function");return function(){return!t.apply(this,arguments)}},w.nthArg=function(t){return t=Kr(t),function(){return arguments[t]}},w.omit=ia,w.omitBy=function(t,e){return e=In(e),Ne(t,function(t,n){return!e(t,n)})},w.once=function(t){return cr(2,t)},w.orderBy=function(t,e,n,r){return null==t?[]:(qo(e)||(e=null==e?[]:[e]),n=r?M:n,qo(n)||(n=null==n?[]:[n]),De(t,e,n))},w.over=ya,w.overArgs=Po,w.overEvery=Ca,w.overSome=Ta,w.partial=Wo,w.partialRight=Ho,w.partition=No,w.pick=oa,w.pickBy=function(t,e){return null==t?{}:Ne(t,In(e))},w.property=ei,w.propertyOf=function(t){return function(e){return null==t?M:ve(t,e)}},w.pull=vo,w.pullAll=Zn,w.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Le(t,e,In(n)):t},w.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Le(t,e,M,n):t},w.pullAt=_o,w.range=xa,w.rangeRight=ba,w.rearg=$o,w.reject=function(t,e){var n=qo(t)?c:fe;return e=In(e,3),n(t,function(t,n,r){return!e(t,n,r)})},w.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=In(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return je(t,i),n},w.rest=hr,w.reverse=Vn,w.sampleSize=ar,w.set=function(t,e,n){return null==t?t:Fe(t,e,n)},w.setWith=function(t,e,n,r){return r="function"==typeof r?r:M,null==t?t:Fe(t,e,n,r)},w.shuffle=function(t){return ar(t,4294967295)},w.slice=function(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&jn(t,e,n)?(e=0,n=r):(e=null==e?0:Kr(e),n=n===M?r:Kr(n)),Pe(t,e,n)):[]},w.sortBy=Ko,w.sortedUniq=function(t){return t&&t.length?qe(t):[]},w.sortedUniqBy=function(t,e){return t&&t.length?qe(t,In(e)):[]},w.split=function(t,e,n){return Ur(t).split(e,n)},w.spread=function(t,e){if("function"!=typeof t)throw new ui("Expected a function");return e=e===M?0:Bi(Kr(e),0),hr(function(r){var i=r[e];return r=r.slice(0,e),i&&d(r,i),n(t,this,r)})},w.tail=function(t){return Gn(t,1)},w.take=function(t,e,n){return t&&t.length?(e=n||e===M?1:Kr(e),Pe(t,0,0>e?0:e)):[]},w.takeRight=function(t,e,n){var r=t?t.length:0;return r?(e=n||e===M?1:Kr(e),e=r-e,Pe(t,0>e?0:e,r)):[]},w.takeRightWhile=function(t,e){return t&&t.length?Ge(t,In(e,3),!1,!0):[]},w.takeWhile=function(t,e){return t&&t.length?Ge(t,In(e,3)):[]},w.tap=function(t,e){return e(t),t},w.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new ui("Expected a function");return xr(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),fr(t,e,{leading:r,maxWait:e,trailing:i})},w.thru=er,w.toArray=Nr,w.toPairs=qr,w.toPairsIn=function(t){return O(t,$r(t))},w.toPath=function(t){return qo(t)?f(t,String):qn(t)},w.toPlainObject=jr,w.transform=function(t,e,n){var r=qo(t)||Dr(t);if(e=In(e,4),null==n)if(r||xr(t)){var i=t.constructor;n=r?qo(t)?new i:[]:yr(i)?ue(xi(t)):{}}else n={};return(r?a:me)(t,function(t,r,i){return e(n,t,r,i)}),n},w.unary=function(t){return ur(t,1)},w.union=Eo,w.unionBy=yo,w.unionWith=Co,w.uniq=function(t){return t&&t.length?Me(t):[]},w.uniqBy=function(t,e){return t&&t.length?Me(t,In(e)):[]},w.uniqWith=function(t,e){return t&&t.length?Me(t,M,e):[]},w.unset=function(t,e){var n;if(null==t)n=!0;else{n=t;var r=e,r=Un(r,n)?[r+""]:re(r);n=$n(n,r),r=Yn(r),n=null!=n&&Pr(n,r)?delete n[r]:!0}return n},w.unzip=Jn,w.unzipWith=Qn,w.update=function(t,e,n){return null!=t&&(n=ne(n),t=Fe(t,e,n(ve(t,e)),void 0)),t},w.updateWith=function(t,e,n,r){return r="function"==typeof r?r:M,null!=t&&(n=ne(n),t=Fe(t,e,n(ve(t,e)),r)),t},w.values=Mr,w.valuesIn=function(t){return null==t?[]:I(t,$r(t))},w.without=To,w.words=Yr,w.wrap=function(t,e){return e=null==e?Vr:e,Wo(e,t)},w.xor=xo,w.xorBy=bo,w.xorWith=Oo,w.zip=So,w.zipObject=function(t,e){return Ye(t||[],e||[],Yt)},w.zipObjectDeep=function(t,e){return Ye(t||[],e||[],Fe)},w.zipWith=Io,w.extend=Xo,w.extendWith=zo,Qr(w,w),w.add=function(t,e){var n;return t===M&&e===M?0:(t!==M&&(n=t),e!==M&&(n=n===M?e:n+e),n)},w.attempt=ma,w.camelCase=aa,w.capitalize=Gr,w.ceil=Oa,w.clamp=function(t,e,n){return n===M&&(n=e,e=M),n!==M&&(n=Lr(n),n=n===n?n:0),e!==M&&(e=Lr(e),e=e===e?e:0),ie(Lr(t),e,n)},w.clone=function(t){return oe(t,!1,!0)},w.cloneDeep=function(t){return oe(t,!0,!0)},w.cloneDeepWith=function(t,e){return oe(t,!0,!0,e)},w.cloneWith=function(t,e){return oe(t,!1,!0,e)},w.deburr=Xr,w.endsWith=function(t,e,n){t=Ur(t),e="string"==typeof e?e:e+"";var r=t.length;return n=n===M?r:ie(Kr(n),0,r),n-=e.length,n>=0&&t.indexOf(e,n)==n},w.eq=mr,w.escape=function(t){return(t=Ur(t))&&tt.test(t)?t.replace(J,N):t},w.escapeRegExp=function(t){return(t=Ur(t))&&ct.test(t)?t.replace(ut,"\\$&"):t},w.every=function(t,e,n){var r=qo(t)?u:se;return n&&jn(t,e,n)&&(e=M),r(t,In(e,3))},w.find=function(t,e){if(e=In(e,3),qo(t)){var n=_(t,e);return n>-1?t[n]:M}return v(t,e,Qi)},w.findIndex=function(t,e){return t&&t.length?_(t,In(e,3)):-1},w.findKey=function(t,e){return v(t,In(e,3),me,!0)},w.findLast=function(t,e){if(e=In(e,3),qo(t)){var n=_(t,e,!0);return n>-1?t[n]:M}return v(t,e,to)},w.findLastIndex=function(t,e){return t&&t.length?_(t,In(e,3),!0):-1},w.findLastKey=function(t,e){return v(t,In(e,3),ge,!0)},w.floor=Sa,w.forEach=rr,w.forEachRight=ir,w.forIn=function(t,e){return null==t?t:eo(t,ne(e),$r)},w.forInRight=function(t,e){return null==t?t:no(t,ne(e),$r)},w.forOwn=function(t,e){return t&&me(t,ne(e))},w.forOwnRight=function(t,e){return t&&ge(t,ne(e))},w.get=Fr,w.gt=gr,w.gte=function(t,e){return t>=e},w.has=Pr,w.hasIn=Wr,w.head=zn,w.identity=Vr,w.includes=function(t,e,n,r){return t=vr(t)?t:Mr(t),n=n&&!r?Kr(n):0,r=t.length,0>n&&(n=Bi(r+n,0)),Rr(t)?r>=n&&-1<t.indexOf(e,n):!!r&&-1<E(t,e,n)},w.indexOf=function(t,e,n){var r=t?t.length:0;return r?(n=Kr(n),0>n&&(n=Bi(r+n,0)),E(t,e,n)):-1},w.inRange=function(t,e,n){return e=Lr(e)||0,n===M?(n=e,e=0):n=Lr(n)||0,t=Lr(t),t>=Li(e,n)&&t<Bi(e,n)},w.invoke=ea,w.isArguments=pr,w.isArray=qo,w.isArrayBuffer=function(t){return br(t)&&"[object ArrayBuffer]"==mi.call(t)},w.isArrayLike=vr,w.isArrayLikeObject=_r,w.isBoolean=function(t){return!0===t||!1===t||br(t)&&"[object Boolean]"==mi.call(t)},w.isBuffer=Mo,w.isDate=function(t){return br(t)&&"[object Date]"==mi.call(t)},w.isElement=function(t){return!!t&&1===t.nodeType&&br(t)&&!Ir(t)},w.isEmpty=function(t){if(vr(t)&&(qo(t)||Rr(t)||yr(t.splice)||pr(t)))return!t.length;for(var e in t)if(fi.call(t,e))return!1;return!0},w.isEqual=function(t,e){return xe(t,e)},w.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:M)?n(t,e):M;return r===M?xe(t,e,n):!!r},w.isError=Er,w.isFinite=function(t){return"number"==typeof t&&Ai(t)},w.isFunction=yr,w.isInteger=Cr,w.isLength=Tr,w.isMap=function(t){return br(t)&&"[object Map]"==Dn(t)},w.isMatch=function(t,e){return t===e||be(t,e,kn(e))},w.isMatchWith=function(t,e,n){return n="function"==typeof n?n:M,be(t,e,kn(e),n)},w.isNaN=function(t){return Sr(t)&&t!=+t},w.isNative=Or,w.isNil=function(t){return null==t},w.isNull=function(t){return null===t},w.isNumber=Sr,w.isObject=xr,w.isObjectLike=br,w.isPlainObject=Ir,w.isRegExp=kr,w.isSafeInteger=function(t){return Cr(t)&&t>=-9007199254740991&&9007199254740991>=t},w.isSet=function(t){return br(t)&&"[object Set]"==Dn(t)},w.isString=Rr,w.isSymbol=wr,w.isTypedArray=Dr,w.isUndefined=function(t){return t===M},w.isWeakMap=function(t){return br(t)&&"[object WeakMap]"==Dn(t)},w.isWeakSet=function(t){return br(t)&&"[object WeakSet]"==mi.call(t)},w.join=function(t,e){return t?Ni.call(t,e):""},w.kebabCase=ua,w.last=Yn,w.lastIndexOf=function(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if(n!==M&&(i=Kr(n),i=(0>i?Bi(r+i,0):Li(i,r-1))+1),e!==e)return B(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1},w.lowerCase=ca,w.lowerFirst=la,w.lt=Ar,w.lte=function(t,e){return e>=t},w.max=function(t){return t&&t.length?p(t,Vr,gr):M},w.maxBy=function(t,e){return t&&t.length?p(t,In(e),gr):M},w.mean=function(t){return ni(t)/(t?t.length:0)},w.min=function(t){return t&&t.length?p(t,Vr,Ar):M},w.minBy=function(t,e){return t&&t.length?p(t,In(e),Ar):M},w.noConflict=function(){return Zt._===this&&(Zt._=gi),this},w.noop=ti,w.now=Bo,w.pad=function(t,e,n){t=Ur(t),e=Kr(e);var r=H(t);return e&&e>r?(r=(e-r)/2,e=Di(r),r=wi(r),_n("",e,n)+t+_n("",r,n)):t},w.padEnd=function(t,e,n){return t=Ur(t),t+_n(t,e,n)},w.padStart=function(t,e,n){return t=Ur(t),_n(t,e,n)+t},w.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),t=Ur(t).replace(lt,""),ji(t,e||(gt.test(t)?16:10))},w.random=function(t,e,n){if(n&&"boolean"!=typeof n&&jn(t,e,n)&&(e=n=M),n===M&&("boolean"==typeof e?(n=e,e=M):"boolean"==typeof t&&(n=t,t=M)),t===M&&e===M?(t=0,e=1):(t=Lr(t)||0,e===M?(e=t,t=0):e=Lr(e)||0),t>e){var r=t;t=e,e=r}return n||t%1||e%1?(n=Ui(),Li(t+n*(e-t+Wt("1e-"+((n+"").length-1))),e)):Ue(t,e)},w.reduce=function(t,e,n){var r=qo(t)?h:C,i=3>arguments.length;return r(t,In(e,4),n,i,Qi)},w.reduceRight=function(t,e,n){var r=qo(t)?m:C,i=3>arguments.length;return r(t,In(e,4),n,i,to)},w.repeat=zr,w.replace=function(){var t=arguments,e=Ur(t[0]);return 3>t.length?e:e.replace(t[1],t[2])},w.result=function(t,e,n){if(Un(e,t))r=null==t?M:t[e];else{e=re(e);var r=Fr(t,e);t=$n(t,e)}return r===M&&(r=n),yr(r)?r.call(t):r},w.round=Ia,w.runInContext=q,w.sample=function(t){t=vr(t)?t:Mr(t);var e=t.length;return e>0?t[Ue(0,e-1)]:M},w.size=function(t){if(null==t)return 0;if(vr(t)){var e=t.length;return e&&Rr(t)?H(t):e}return Hr(t).length},w.snakeCase=fa,w.some=function(t,e,n){var r=qo(t)?g:We;return n&&jn(t,e,n)&&(e=M),r(t,In(e,3))},w.sortedIndex=function(t,e){return He(t,e)},w.sortedIndexBy=function(t,e,n){return $e(t,e,In(n))},w.sortedIndexOf=function(t,e){var n=t?t.length:0;if(n){var r=He(t,e);if(n>r&&mr(t[r],e))return r}return-1},w.sortedLastIndex=function(t,e){return He(t,e,!0)},w.sortedLastIndexBy=function(t,e,n){return $e(t,e,In(n),!0)},w.sortedLastIndexOf=function(t,e){if(t&&t.length){var n=He(t,e,!0)-1;if(mr(t[n],e))return n}return-1},w.startCase=da,w.startsWith=function(t,e,n){return t=Ur(t),n=ie(Kr(n),0,t.length),t.lastIndexOf(e,n)==n},w.subtract=function(t,e){var n;return t===M&&e===M?0:(t!==M&&(n=t),e!==M&&(n=n===M?e:n-e),n)},w.sum=ni,w.sumBy=function(t,e){return t&&t.length?x(t,In(e)):0},w.template=function(t,e,n){var r=w.templateSettings;n&&jn(t,e,n)&&(e=M),t=Ur(t),e=zo({},e,r,Xt),n=zo({},e.imports,r.imports,Xt);var i,o,a=Hr(n),u=I(n,a),c=0;n=e.interpolate||Tt;var l="__p+='";n=ai((e.escape||Tt).source+"|"+n.source+"|"+(n===rt?ht:Tt).source+"|"+(e.evaluate||Tt).source+"|$","g");var s="sourceURL"in e?"//# sourceURL="+e.sourceURL+"\n":"";if(t.replace(n,function(e,n,r,a,u,s){return r||(r=a),l+=t.slice(c,s).replace(xt,K),n&&(i=!0,l+="'+__e("+n+")+'"),u&&(o=!0,l+="';"+u+";\n__p+='"),r&&(l+="'+((__t=("+r+"))==null?'':__t)+'"),c=s+e.length,e}),l+="';",(e=e.variable)||(l="with(obj){"+l+"}"),l=(o?l.replace(z,""):l).replace(Y,"$1").replace(Z,"$1;"),l="function("+(e||"obj")+"){"+(e?"":"obj||(obj={});")+"var __t,__p=''"+(i?",__e=_.escape":"")+(o?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}",e=ma(function(){return Function(a,s+"return "+l).apply(M,u)}),e.source=l,Er(e))throw e;return e},w.times=function(t,e){if(t=Kr(t),1>t||t>9007199254740991)return[];var n=4294967295,r=Li(t,4294967295);for(e=ne(e),t-=4294967295,r=b(r,e);++n<t;)e(n);return r},w.toInteger=Kr,w.toLength=Br,w.toLower=function(t){return Ur(t).toLowerCase()},w.toNumber=Lr,w.toSafeInteger=function(t){return ie(Kr(t),-9007199254740991,9007199254740991)},w.toString=Ur,w.toUpper=function(t){return Ur(t).toUpperCase()},w.trim=function(t,e,n){return(t=Ur(t))?n||e===M?t.replace(lt,""):(e+="")?(t=t.match(kt),e=e.match(kt),t.slice(k(t,e),R(t,e)+1).join("")):t:t},w.trimEnd=function(t,e,n){return(t=Ur(t))?n||e===M?t.replace(ft,""):(e+="")?(t=t.match(kt),t.slice(0,R(t,e.match(kt))+1).join("")):t:t},w.trimStart=function(t,e,n){return(t=Ur(t))?n||e===M?t.replace(st,""):(e+="")?(t=t.match(kt),t.slice(k(t,e.match(kt))).join("")):t:t},w.truncate=function(t,e){var n=30,r="...";if(xr(e))var i="separator"in e?e.separator:i,n="length"in e?Kr(e.length):n,r="omission"in e?Ur(e.omission):r;t=Ur(t);var o=t.length;if(Rt.test(t))var a=t.match(kt),o=a.length;if(n>=o)return t;if(o=n-H(r),1>o)return r;if(n=a?a.slice(0,o).join(""):t.slice(0,o),i===M)return n+r;if(a&&(o+=n.length-o),kr(i)){if(t.slice(o).search(i)){var u=n;for(i.global||(i=ai(i.source,Ur(mt.exec(i))+"g")),i.lastIndex=0;a=i.exec(u);)var c=a.index;n=n.slice(0,c===M?o:c)}}else t.indexOf(i,o)!=o&&(i=n.lastIndexOf(i),i>-1&&(n=n.slice(0,i)));return n+r},w.unescape=function(t){return(t=Ur(t))&&Q.test(t)?t.replace(V,$):t},w.uniqueId=function(t){var e=++di;return Ur(t)+e},w.upperCase=ha,w.upperFirst=sa,w.each=rr,w.eachRight=ir,w.first=zn,Qr(w,function(){var t={};return me(w,function(e,n){fi.call(w.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),w.VERSION="4.6.1",a("bind bindKey curry curryRight partial partialRight".split(" "),function(t){w[t].placeholder=w}),a(["drop","take"],function(t,e){Ot.prototype[t]=function(n){var r=this.__filtered__;if(r&&!e)return new Ot(this);n=n===M?1:Bi(Kr(n),0);var i=this.clone();return r?i.__takeCount__=Li(n,i.__takeCount__):i.__views__.push({size:Li(n,4294967295),type:t+(0>i.__dir__?"Right":"")}),i},Ot.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),a(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;Ot.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:In(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),a(["head","last"],function(t,e){var n="take"+(e?"Right":"");Ot.prototype[t]=function(){return this[n](1).value()[0]}}),a(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Ot.prototype[t]=function(){return this.__filtered__?new Ot(this):this[n](1)}}),Ot.prototype.compact=function(){return this.filter(Vr)},Ot.prototype.find=function(t){return this.filter(t).head()},Ot.prototype.findLast=function(t){return this.reverse().find(t)},Ot.prototype.invokeMap=hr(function(t,e){return"function"==typeof t?new Ot(this):this.map(function(n){return Te(n,t,e)})}),Ot.prototype.reject=function(t){return t=In(t,3),this.filter(function(e){return!t(e)})},Ot.prototype.slice=function(t,e){t=Kr(t);var n=this;return n.__filtered__&&(t>0||0>e)?new Ot(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==M&&(e=Kr(e),n=0>e?n.dropRight(-e):n.take(e-t)),n)},Ot.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ot.prototype.toArray=function(){return this.take(4294967295)},me(Ot.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=w[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(w.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,u=e instanceof Ot,c=a[0],l=u||qo(e),s=function(t){return t=i.apply(w,d([t],a)),r&&f?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,h=!!this.__actions__.length,c=o&&!f,u=u&&!h;return!o&&l?(e=u?e:new Ot(this),e=t.apply(e,a),e.__actions__.push({func:er,args:[s],thisArg:M}),new bt(e,f)):c&&u?t.apply(this,a):(e=this.thru(s),c?r?e.value()[0]:e.value():e)})}),a("pop push shift sort splice unshift".split(" "),function(t){var e=ci[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);w.prototype[t]=function(){var t=arguments;return r&&!this.__chain__?e.apply(this.value(),t):this[n](function(n){return e.apply(n,t)})}}),me(Ot.prototype,function(t,e){var n=w[e];if(n){var r=n.name+"";(Gi[r]||(Gi[r]=[])).push({name:e,func:n})}}),Gi[gn(M,2).name]=[{name:"wrapper",func:M}],Ot.prototype.clone=function(){var t=new Ot(this.__wrapped__);return t.__actions__=tn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=tn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=tn(this.__views__),t},Ot.prototype.reverse=function(){if(this.__filtered__){var t=new Ot(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t},Ot.prototype.value=function(){var t,e=this.__wrapped__.value(),n=this.__dir__,r=qo(e),i=0>n,o=r?e.length:0;t=0;for(var a=o,u=this.__views__,c=-1,l=u.length;++c<l;){var s=u[c],f=s.size;switch(s.type){case"drop":t+=f;break;case"dropRight":a-=f;break;case"take":a=Li(a,t+f);break;case"takeRight":t=Bi(t,a-f)}}if(t={start:t,end:a},a=t.start,u=t.end,t=u-a,i=i?u:a-1,a=this.__iteratees__,u=a.length,c=0,l=Li(t,this.__takeCount__),!r||200>o||o==t&&l==t)return Xe(e,this.__actions__);r=[];t:for(;t--&&l>c;){for(i+=n,o=-1,s=e[i];++o<u;){var d=a[o],f=d.type,d=(0,d.iteratee)(s);if(2==f)s=d;else if(!d){if(1==f)continue t;break t}}r[c++]=s}return r},w.prototype.at=ko,w.prototype.chain=function(){return tr(this)},w.prototype.commit=function(){return new bt(this.value(),this.__chain__)},w.prototype.flatMap=function(t){return this.map(t).flatten()},w.prototype.next=function(){this.__values__===M&&(this.__values__=Nr(this.value()));var t=this.__index__>=this.__values__.length,e=t?M:this.__values__[this.__index__++];return{done:t,value:e}},w.prototype.plant=function(t){for(var e,n=this;n instanceof yt;){var r=Mn(n);r.__index__=0,r.__values__=M,e?i.__wrapped__=r:e=r;var i=r,n=n.__wrapped__}return i.__wrapped__=t,e},w.prototype.reverse=function(){var t=this.__wrapped__;return t instanceof Ot?(this.__actions__.length&&(t=new Ot(this)),t=t.reverse(),t.__actions__.push({func:er,args:[Vn],thisArg:M}),new bt(t,this.__chain__)):this.thru(Vn)},w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=function(){return Xe(this.__wrapped__,this.__actions__)},Oi&&(w.prototype[Oi]=nr),w}var M,G=1/0,X=NaN,z=/\b__p\+='';/g,Y=/\b(__p\+=)''\+/g,Z=/(__e\(.*?\)|\b__t\))\+'';/g,V=/&(?:amp|lt|gt|quot|#39|#96);/g,J=/[&<>"'`]/g,Q=RegExp(V.source),tt=RegExp(J.source),et=/<%-([\s\S]+?)%>/g,nt=/<%([\s\S]+?)%>/g,rt=/<%=([\s\S]+?)%>/g,it=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ot=/^\w*$/,at=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,ut=/[\\^$.*+?()[\]{}|]/g,ct=RegExp(ut.source),lt=/^\s+|\s+$/g,st=/^\s+/,ft=/\s+$/,dt=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mt=/\w*$/,gt=/^0x/i,pt=/^[-+]0x[0-9a-f]+$/i,vt=/^0b[01]+$/i,_t=/^\[object .+?Constructor\]$/,Et=/^0o[0-7]+$/i,yt=/^(?:0|[1-9]\d*)$/,Ct=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Tt=/($^)/,xt=/['\n\r\u2028\u2029\\]/g,bt="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?)*",Ot="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+bt,St="(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]?|[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",It=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]","g"),kt=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+St+bt,"g"),Rt=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),wt=/[a-zA-Z0-9]+/g,Dt=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2018\\u2019\\u201c\\u201d \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2018\\u2019\\u201c\\u201d \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2018\\u2019\\u201c\\u201d \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2018\\u2019\\u201c\\u201d \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2018\\u2019\\u201c\\u201d \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|\\d+",Ot].join("|"),"g"),At=/[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Nt="Array Buffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Reflect RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),Kt={};
Kt["[object Float32Array]"]=Kt["[object Float64Array]"]=Kt["[object Int8Array]"]=Kt["[object Int16Array]"]=Kt["[object Int32Array]"]=Kt["[object Uint8Array]"]=Kt["[object Uint8ClampedArray]"]=Kt["[object Uint16Array]"]=Kt["[object Uint32Array]"]=!0,Kt["[object Arguments]"]=Kt["[object Array]"]=Kt["[object ArrayBuffer]"]=Kt["[object Boolean]"]=Kt["[object Date]"]=Kt["[object Error]"]=Kt["[object Function]"]=Kt["[object Map]"]=Kt["[object Number]"]=Kt["[object Object]"]=Kt["[object RegExp]"]=Kt["[object Set]"]=Kt["[object String]"]=Kt["[object WeakMap]"]=!1;var Bt={};Bt["[object Arguments]"]=Bt["[object Array]"]=Bt["[object ArrayBuffer]"]=Bt["[object Boolean]"]=Bt["[object Date]"]=Bt["[object Float32Array]"]=Bt["[object Float64Array]"]=Bt["[object Int8Array]"]=Bt["[object Int16Array]"]=Bt["[object Int32Array]"]=Bt["[object Map]"]=Bt["[object Number]"]=Bt["[object Object]"]=Bt["[object RegExp]"]=Bt["[object Set]"]=Bt["[object String]"]=Bt["[object Symbol]"]=Bt["[object Uint8Array]"]=Bt["[object Uint8ClampedArray]"]=Bt["[object Uint16Array]"]=Bt["[object Uint32Array]"]=!0,Bt["[object Error]"]=Bt["[object Function]"]=Bt["[object WeakMap]"]=!1;var Lt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},jt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ut={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ft={"function":!0,object:!0},Pt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Wt=parseFloat,Ht=parseInt,$t=Ft["undefined"==typeof exports?"undefined":o(exports)]&&exports&&!exports.nodeType?exports:M,qt=Ft["undefined"==typeof module?"undefined":o(module)]&&module&&!module.nodeType?module:M,Mt=qt&&qt.exports===$t?$t:M,Gt=w($t&&qt&&"object"==("undefined"==typeof global?"undefined":o(global))&&global),Xt=w(Ft["undefined"==typeof self?"undefined":o(self)]&&self),zt=w(Ft["undefined"==typeof window?"undefined":o(window)]&&window),Yt=w(Ft[o(this)]&&this),Zt=Gt||zt!==(Yt&&Yt.window)&&zt||Xt||Yt||Function("return this")(),Vt=q();(zt||Xt||{})._=Vt,"function"==typeof i&&"object"==o(i.amd)&&i.amd&&i("ckLodash",[],function(){return Vt})}(),_.noConflict(),i("utils/constants",{WIX_GUARD:"\u200b",CK_GUARD:"",BACKSPACE_KEYCODE:8,RETURN_KEYCODE:13,ENTER_KEYCODE:14,SHIFT_KEYCODE:16,CONTROL_KEYCODE:17,ALT_KEYCODE:18,PAGE_UP_KEYCODE:33,PAGE_DOWN_KEYCODE:34,END_KEYCODE:35,HOME_KEYCODE:36,LEFT_KEYCODE:37,UP_KEYCODE:38,RIGHT_KEYCODE:39,DOWN_KEYCODE:40,DELETE_KEYCODE:46,TEXT_BLOCKS:["p","h1","h2","h3","h4","h5","h6"],COLOR_CLASS_PREFIX:"color_",BACKCOLOR_CLASS_PREFIX:"backcolor_",WINDOWS_APPS_KEY:"Apps",MOUSE_LEFT_CLICK_BUTTON:1,MOUSE_RIGHT_CLICK_BUTTON:2}),i("utils/utils",["ckLodash","utils/constants"],function(t,e){"use strict";function n(t){return null===t.block?t.blockLimit:t.block}function r(t){return new RegExp("^["+e.CK_GUARD+e.WIX_GUARD+"\n\r\\s\ufeff]*$").test(t)}function i(t){return!!CKEDITOR.dtd.$block[t]}function o(t){return!(!CKEDITOR.dtd.$list[t]&&!CKEDITOR.dtd.$listItem[t])}function a(){return new RegExp(e.WIX_GUARD+"|"+e.CK_GUARD,"g")}function u(t){var e=a();return t.replace(e,"")}function c(t){return u(t.editable().$.textContent).length}function l(t){var e=document.createElement("div");return e.innerHTML=t,e.textContent}function s(e){var n=document.createElement("div");n.innerHTML=e;var r=document.createDocumentFragment(),i=Array.prototype.slice.call(n.childNodes);return t.forEach(i,function(t){r.appendChild(t)}),new CKEDITOR.dom.documentFragment(r)}function f(t){return t.replace(/\s/g,"")}function d(t){return t&&t.getName?-1!==e.TEXT_BLOCKS.indexOf(t.getName()):!1}function h(){return CKEDITOR.env.safari}function m(){return CKEDITOR.env.gecko}function g(){return CKEDITOR.env.ie}function p(t){return t.getCommand("numberedlist").state!==CKEDITOR.TRISTATE_OFF||t.getCommand("bulletedlist").state!==CKEDITOR.TRISTATE_OFF}function v(e,n){if(!n)return!1;var r=(e||"").trim().toLowerCase().split(/\s+/),i=(n||"").trim().toLowerCase().split(/\s+/);return!t.isEqual(r,i)}return{getBlockParent:n,getCKDocumentFragment:s,getEditorTextLength:c,getFindGuardsRegex:a,getPlainTextFromHtml:l,isBlockElement:i,isFF:m,isIE:g,isListElement:o,isListStateOn:p,isTextBlock:d,isWhiteSpace:r,isSafari:h,removeGuardsChars:u,removeSpaces:f,isSpellCheckCorrectionOccurred:v}}),i("utils/rangeUtils",["utils/utils","ckLodash","utils/constants"],function(e,n,r){"use strict";function i(t){return{startBlock:e.getBlockParent(t.startPath()),endBlock:e.getBlockParent(t.endPath())}}function o(t){return{startLists:n.filter(t.startPath().elements,function(t){return t.getName&&CKEDITOR.dtd.$list[t.getName()]}),endLists:n.filter(t.endPath().elements,function(t){return t.getName&&CKEDITOR.dtd.$list[t.getName()]})}}function a(t,e){var n=t.clone();return n.setStartBefore(e),t.endPath().contains(e)&&n.setEndAfter(e),k(t,n)}function u(t,e){var n=t.clone();return n.setEndAfter(e),t.startPath().contains(e)&&n.setStartBefore(e),k(t,n)}function c(t,e){if(!t)return[];var r=i(t);if(!r)return[];var o=[];if((e||R(t))&&o.push(r.startBlock),d(r))return o;for(var a=new CKEDITOR.dom.walker(t);a.next()&&!f(a.current,r.endBlock);)h(a.current)&&o.push(a.current);return(e||w(t))&&o.push(r.endBlock),n.uniqBy(o,function(t){return t.$})}function l(t,e){if(!t)return[];var r=[],i=o(t);n.forEach(i.startLists,function(n){(e||a(t,n))&&r.push(n)});for(var c=new CKEDITOR.dom.walker(t),l=t.endPath();c.next();)c.current&&!l.contains(c.current)&&m(c.current)&&r.push(c.current);return n.forEach(i.endLists,function(n){(e||u(t,n))&&r.push(n)}),n.uniqBy(r,function(t){return t.$})}function s(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!0,i=[];(r||R(e))&&(i=n.filter(e.startPath().elements,g));var o=[].concat(t(I(e,g)),t(i));return n.uniqBy(o,function(t){return t.$})}function f(t,e){return n.isEqual(t.getUniqueId(),e.getUniqueId())}function d(t){return n.isEqual(t.startBlock.getUniqueId(),t.endBlock.getUniqueId())}function h(t){return t&&!n.isEqual(t.type,CKEDITOR.NODE_TEXT)&&!e.isListElement(t.getName())&&e.isBlockElement(t.getName())}function m(t){return CKEDITOR.dtd.$list[n.result(t,"getName")]}function g(t){return CKEDITOR.dtd.$listItem[n.result(t,"getName")]}function p(t){for(var e,n=new CKEDITOR.dom.walker(t),r="";e=n.next();)e.type===CKEDITOR.NODE_TEXT&&(r+=e.getUniqueId()===t.endContainer.getUniqueId()&&e.getUniqueId()===t.startContainer.getUniqueId()?e.getText().substring(t.startOffset,t.endOffset):e.getUniqueId()===t.endContainer.getUniqueId()?e.getText().substring(0,t.endOffset):e.getUniqueId()===t.startContainer.getUniqueId()?e.getText().substring(t.startOffset,e.getText().length):e.getText());return r}function v(t){for(var e,n=new CKEDITOR.dom.walker(t),r=0;e=n.next();)e.type===CKEDITOR.NODE_ELEMENT&&"br"===e.getName()&&r++;return r}function _(t,e){var n=t.startPath().contains(e),r=t.endPath().contains(e);return n&&r}function E(t,e,n){for(var r,i=n?"previous":"next",o=null,a=new CKEDITOR.dom.walker(t);r=a[i]();)e(r)&&(o=r,a.end());return o}function y(t){return t.type===CKEDITOR.NODE_TEXT&&t.getText().replace(/[\n\r]/g,"").length>0}function C(t){return t.getName&&-1!==r.TEXT_BLOCKS.indexOf(t.getName())}function T(t){return E(t,y)}function x(t){return E(t,y,!0)}function b(t){return E(t,C)}function O(t){return E(t,C,!0)}function S(t,e,r){for(var i,o=new CKEDITOR.dom.walker(t),a=o.next();a;){if(n.result(a,"getName")===e){if(r)return a;i=a}a=o.next()}return i}function I(t,e){for(var n=new CKEDITOR.dom.walker(t),r=n.next(),i=[];r;)e(r)&&i.push(r),r=n.next();return i}function k(t,e){var n=p(t),r=p(e);return n===r}function R(t){var e=t.clone(),r=i(t);return e.setStartBefore(r.startBlock),n.isEqual(r.startBlock.getUniqueId(),r.endBlock.getUniqueId())&&e.setEndAfter(r.endBlock),k(t,e)}function w(t){var e=t.clone(),r=i(t);return e.setEndAfter(r.endBlock),n.isEqual(r.startBlock.getUniqueId(),r.endBlock.getUniqueId())&&e.setStartBefore(r.startBlock),k(t,e)}function D(t){for(var e,n=new CKEDITOR.dom.walker(t),r=[];e=n.next();)e.type===CKEDITOR.NODE_TEXT&&r.push(e);return r}function A(t,e,n,r,i){var o=new CKEDITOR.dom.range(t);return o.setStart(e,n),r&&o.setEnd(r,i),o}return{countBrInRange:v,createRange:A,findFirstNonEmptyTextNode:T,findFirstTextBlock:b,findLastNonEmptyTextNode:x,findLastTextBlock:O,getAllElementsInRange:I,getElementFromRange:S,getBlocks:c,getListItems:s,getLists:l,getStartAndEndBlock:i,getText:p,getTextNodesInSelection:D,isRangeInsideElement:_,isStarBlockFullyInRange:R,isEndBlockFullyInRange:w}}),i("utils/elementUtils",["utils/utils","utils/rangeUtils","ckLodash"],function(t,e,n){"use strict";function r(t,e,r){var i=t.$.style;n.chain(i).filter(r).forEach(function(t){e.setStyle(t,i[t])}).value()}function i(t,e){var n=new CKEDITOR.dom.range(e);return n.selectNodeContents(e),new CKEDITOR.dom.walker(n)}function o(t,e,r){var i=t.$.classList;n.chain(i).filter(r).forEach(function(t){e.addClass(t)}).value()}function a(e){return t.isWhiteSpace(e.getText())}function u(e){return e&&0===t.removeGuardsChars(e.$.textContent).length}function c(t,n){if(!t.startPath().contains(n))return null;var r=t.clone();return r.setStart(n,0),r.setEnd(r.endContainer,r.endOffset),e.getText(r)}function l(t,e){return n.find(t.elements,function(t){return n.result(t,"getName")===e})}function s(t,e){t.$&&n.chain(t.$.classList).filter(function(t){return n.startsWith(t,e)}).forEach(function(e){t.removeClass(e)}).value()}function f(e){var n=e.getHtml(),r=t.removeGuardsChars(n),i=t.getCKDocumentFragment(r);i.replace(e)}function d(t){return n.find(t.getAttribute("class").split(" "),function(t){return n.startsWith(t,"font_")})}return{cloneStylesToElement:r,cloneClassesToElement:o,getElementFromPath:l,getTextBeforeCursor:c,getWalkerForElement:i,isElementTextEmpty:u,isWhiteSpace:a,removeClassesWithPrefix:s,replaceElementByItsContents:f,getTheme:d}}),i("utils/findElementUtils",["utils/utils","utils/rangeUtils","utils/elementUtils"],function(t,e,n){"use strict";function r(e,n){if(t.isTextBlock(n))return n;n=n||e.editable();var r=new CKEDITOR.dom.range(e.editable());r.selectNodeContents(n);for(var i,o=new CKEDITOR.dom.walker(r);i=o.next();)if(t.isTextBlock(i))return i}function i(t,e){var r,i=null;e=e||t.editable();var o=n.getWalkerForElement(t,e);if(e.type===CKEDITOR.NODE_TEXT&&e.getText().length>0)return e;for(;r=o.next();)r.type===CKEDITOR.NODE_TEXT&&r.getText().length>0&&(i=r,o.end());return i}function o(n,r,i){var o=i.createRange(),a=t.getBlockParent(i.elementPath(n));return r?(o.setStartAt(a,CKEDITOR.POSITION_AFTER_START),o.setEndBefore(n),e.findLastNonEmptyTextNode(o)):(o.setEndAt(a,CKEDITOR.POSITION_BEFORE_END),o.setStartAfter(n),e.findFirstNonEmptyTextNode(o))}return{findFirstTextBlock:r,findFirstNonEmptyTextNode:i,getTextNodeNextToElement:o}}),i("utils/biUtils",[],function(){"use strict";return{error:{nestedStyles:function(){CKEDITOR.wixDocumentServices?CKEDITOR.wixDocumentServices.bi.error({errorName:"TEXT_NESTED_STYLES",errorCode:12901,severity:"recoverable"}):console.log("there shouldn't be nested styles of the same type")},unableToRestoreSelection:function(){CKEDITOR.wixDocumentServices?CKEDITOR.wixDocumentServices.bi.error({errorName:"TEXT_UNABLE_TO_RESTORE_SELECTION",errorCode:12902,severity:"error"}):console.log("unable to restore original selection")}}}}),i("utils/selectionUtils",["ckLodash","utils/rangeUtils","utils/utils","utils/constants","utils/elementUtils","utils/findElementUtils","utils/biUtils"],function(t,e,n,r,i,o,a){"use strict";function u(t){var e=t.getSelection();return e&&e.getRanges()[0]}function c(t){try{var e=t.getSelectedHtml().$.children,n=e[e.length-1];return"BR"===n.tagName}catch(r){return!1}}function l(t){if(!c(t)){var e=u(t);if(e){e.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS);try{e.select()}catch(n){}}}}function s(t){return!!u(t)}function f(r,i,a){var c=u(r).clone(),l=o.findFirstNonEmptyTextNode(r,i);if(!l)return!0;c.setStart(l,0);var s=e.getText(c),f=d(r),h=i.$.textContent;return a&&(s=n.removeGuardsChars(s),f=n.removeGuardsChars(f),h=n.removeGuardsChars(h)),p(r,i)?f===h:t.startsWith(f,s)}function d(t){var e=t.getSelectedHtml();return e?e.$.textContent:""}function h(t,e){for(var n,r=null,o=i.getWalkerForElement(t,e);n=o.previous();)n.type===CKEDITOR.NODE_TEXT&&(r=n,o.end());return r}function m(t){var e=t.getSelectedHtml().$.textContent;return 0===n.removeGuardsChars(e).length}function g(t,e,n){var r=new CKEDITOR.dom.range(t.editable());r.setStartAt(e,CKEDITOR.POSITION_AFTER_START),r.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),r.select()}function p(t,e){var r=n.getBlockParent(new CKEDITOR.dom.elementPath(e)),i=n.getBlockParent(u(t).endPath());return r.equals(i)}function v(t,n){n=n||t.editable();var r=new CKEDITOR.dom.range(t.editable());r.selectNodeContents(n);var i=u(t);return r.setEnd(i.startContainer,i.startOffset),e.countBrInRange(r)}function _(t,e){var n=u(t);return e?E(n):n.startContainer.type===CKEDITOR.NODE_TEXT&&n.endContainer.type===CKEDITOR.NODE_TEXT?n.startContainer.equals(n.endContainer)&&0===n.startContainer.$.textContent?E(n):null:E(n)}function E(e){var n=e.createBookmark();return n.startNode&&(n.wixStartNodeId=t.uniqueId(),n.startNode.setAttribute("wix-bookmark-"+n.wixStartNodeId,"")),n.endNode&&(n.wixEndNodeId=t.uniqueId(),n.endNode.setAttribute("wix-bookmark-"+n.wixEndNodeId,"")),n}function y(t,e){if(e){if(C(t,e),!e.startNode)return void a.error.unableToRestoreSelection();var n=u(t);n.moveToBookmark(e),n.select()}}function C(t,e){if(e.startNode&&!t.editable().contains(e.startNode)){var n=t.editable().$.querySelector("[wix-bookmark-"+e.wixStartNodeId+"]");if(n){var r=new CKEDITOR.dom.element(n);e.startNode=r}}if(e.endNode&&!t.editable().contains(e.endNode)){var i=t.editable().$.querySelector("[wix-bookmark-"+e.wixEndNodeId+"]");if(i){var o=new CKEDITOR.dom.element(i);e.endNode=o}}}function T(t,e){return t.startContainer.equals(e.editable())}function x(t,e){return t.endContainer.equals(e.editable())}function b(t){var n=e.findFirstNonEmptyTextNode(t);if(n)t.setStart(n,0);else{var r=e.findFirstTextBlock(t);t.setStart(r,0)}}function O(t){var n=e.findLastNonEmptyTextNode(t);if(n)t.setEnd(n,n.$.textContent.length);else{var r=e.findLastTextBlock(t);t.setEnd(r,r.getChildCount())}}function S(t,e){if(T(t,e)){var n=t.clone();0===t.startOffset?(n.setEnd(e.editable(),e.editable().getChildCount()),b(n),n.collapse(!0)):(n.setStart(e.editable(),0),O(n),n.collapse()),n.select()}}function I(t){var e,n=u(t);return n.collapsed?void S(n,t):(T(n,t)&&(e=!0,b(n)),x(n,t)&&(e=!0,O(n)),void(e&&n.select()))}function k(e){var n=e.getSelection(),i=n.getRanges()[0],o=n.getSelectedText().replace(/\n/g,"").replace(r.CK_GUARD,""),a=i.startPath().block;return!t.isEmpty(o)&&f(e,a)&&o===a.getText().replace(/\n/g,"").replace(r.CK_GUARD,"")}function R(n){if(!n.getSelectedHtml())return!1;var r=n.getSelection().getRanges()[0];if(!r||!r.startPath().block)return!1;var i=e.getStartAndEndBlock(r);return t.isEqual(i.startBlock.getUniqueId(),i.endBlock.getUniqueId())?!1:!k(n)}function w(t,e){for(var n=u(t),r=new CKEDITOR.dom.walker(n);r.next();)e(r.current)}function D(t){return e.getTextNodesInSelection(u(t))}function A(t,n){var r=u(t);return e.getBlocks(r,n)}function N(t,n){var r=u(t);return e.getLists(r,n)}function K(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!0;return e.getListItems(u(t),n)}return{createBookmark:_,countBrTagsBeforeCursor:v,enlargeSelectionToBlock:l,findLastTextNode:h,fixSelectionOnBody:I,forEachSelectedElement:w,getSelectedBlocks:A,getSelectedListItems:K,getSelectedLists:N,getSelectedRange:u,getSelectedText:d,getTextNodesInSelection:D,hasSelectedRange:s,isSelectedTextEmpty:m,isStartBlockTextFullySelected:f,moveToBookmark:y,selectionEndsInSameBlockAsElement:p,setSelectionBetweenElements:g,isMultipleBlockSelection:R}}),i("utils/guardUtils",["ckLodash","utils/constants","utils/findElementUtils","utils/selectionUtils","utils/rangeUtils","utils/elementUtils","utils/utils"],function(t,e,n,r,i,o,a){"use strict";function u(t){var e=t.$.querySelector(".wixGuard");return e&&new CKEDITOR.dom.element(e)}function c(t){return!!t.$.querySelector(".wixGuard")}function l(e,n){n=n||e.editable();var r=n.$.querySelectorAll(".wixGuard");return t.map(r,function(t){return new CKEDITOR.dom.element(t)})}function s(e){var n=t.filter(l(e),function(t){var n=a.getBlockParent(new CKEDITOR.dom.elementPath(t));if(!o.isElementTextEmpty(n))return!0;var r=l(e,n);return r.length&&r[0].getUniqueId()!==t.getUniqueId()});t.forEach(n,function(t){C(e,t)})}function f(t,r,i,o){if(!c(r)){i||(i=n.findFirstNonEmptyTextNode(t,r),o=!1);var a=new CKEDITOR.dom.element("span");a.setAttribute("class","wixGuard"),a.setText(e.WIX_GUARD),i&&o?a.insertAfter(i):i?a.insertBefore(i):r.append(a,!0)}}function d(t,e){var n=u(e);if(!n)return!1;var i=r.getSelectedRange(t);if(y(n,i)||E(n,i))return!0;for(var o,a=new CKEDITOR.dom.walker(i);o=a.next();)if(o.getUniqueId()===n.getUniqueId())return!0;return!1}function h(t,e,n,i){if(!r.selectionEndsInSameBlockAsElement(t,e))return!0;var o=new CKEDITOR.dom.range(t.editable()),a=n.endContainer;if(a.type!==CKEDITOR.NODE_TEXT){var u=a.getChildCount();a=n.endOffset===u?a.getChild(n.endOffset-1):a.getChild(n.endOffset)}n.selectNodeContents(i);for(var c,l=new CKEDITOR.dom.walker(o);c=l.next();){if(c.getUniqueId()===e.getUniqueId())return!1;if(c.getUniqueId()===a.getUniqueId())return!0}return!1}function m(t,e,n){var i=u(e);if(i){var o=r.getSelectedRange(t),a=o.collapsed;a||n||!h(t,i,o,e)?(o.setStartAfter(i),o.collapse(!0)):o.setStartAfter(i),o.select()}}function g(t,e){var n=u(e);if(n){var r=new CKEDITOR.dom.range(t.editable());r.setStartAfter(n),r.collapse(!0),r.select()}}function p(t,e){var n=u(e);if(n){var r=new CKEDITOR.dom.range(t.editable());r.setStartBefore(n),r.collapse(!0),r.select()}}function v(t,e){if(e){var n=new CKEDITOR.dom.range(t.editable());n.setStartBefore(e),n.setEndAfter(e),n.select()}}function _(t,e){s(t);var n=u(e);if(n){var o=r.getSelectedRange(t);i.isRangeInsideElement(o,e)?v(t,n):(o.setStartBefore(n),o.select())}}function E(t,e){return e.endContainer.getUniqueId()===t.getUniqueId()||e.endContainer.getParent().getUniqueId()===t.getUniqueId()}function y(t,e){return e.startContainer.getUniqueId()===t.getUniqueId()||e.startContainer.getParent().getUniqueId()===t.getUniqueId()}function C(t,n){var i=r.getSelectedRange(t);y(n,i)&&i.setStartBefore(n),E(n,i)&&i.setEndAfter(n);var o=r.createBookmark(t),u=n.getHtml();if(u!==e.WIX_GUARD){var c=a.getCKDocumentFragment(a.removeGuardsChars(u));c.replace(n)}else n.remove();r.moveToBookmark(t,o)}function T(t,e){var n=u(e);n&&(o.isElementTextEmpty(e)||C(t,n))}function x(t){return t.replace(/<span class="wixGuard">.*?<\/span>/g,'<span class="wixGuard">'+e.WIX_GUARD+"</span>")}return{expandSelectionToGuard:_,getAllGuards:l,getGuard:u,guardInSelection:d,hasGuard:c,insertGuard:f,moveSelectionAfterGuard:m,removeGuardIfSafe:T,selectGuard:v,setCursorAfterGuard:g,setCursorBeforeGuard:p,transformGuardForSetData:x,removeUneededGuards:s}}),i("commands/wixSetHtmlCommand",["utils/guardUtils"],function(t){"use strict";return{editorFocus:!1,exec:function(e,n){n=n.replace(/<font (.*?)>/g,function(t,e){var n='<span style="',r='">',i=e.replace(/size="(.*?)"/g,"").replace("=",":").replace(/" /g,'";').replace(/"/g,"").replace(/face/g,"font-family");return n+i+r}).replace(/<\/font>/g,"</span>"),n=t.transformGuardForSetData(n),n=e.dataProcessor.toHtml(n),e.editable().setHtml(n)}}}),i("commands/styleCommand",["ckLodash","utils/biUtils"],function(t,e){"use strict";function n(t,e){var n=[];switch(e.type){case CKEDITOR.STYLE_BLOCK:t.block&&e.checkElementRemovable(t.block,!0)&&n.push(t.block),t.blockLimit&&e.checkElementRemovable(t.blockLimit,!0)&&n.push(t.blockLimit);break;case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var r,i=t.elements,o=0;o<i.length;o++)if(r=i[o],e.type!==CKEDITOR.STYLE_INLINE||r!==t.block&&r!==t.blockLimit){if(e.type===CKEDITOR.STYLE_OBJECT){var a=r.getName();if(!("string"==typeof e.element?a===e.element:a in e.element))continue}e.checkElementRemovable(r,!0)&&n.push(r)}}return n}function r(t,e,n){var i=e.pop();if(i)if(n)r(t,e,i.equals(n)?null:n);else{var o=i.clone();t.insertNode(o),t.moveToPosition(o,CKEDITOR.POSITION_AFTER_START),r(t,e)}}function i(t,e,n,i){if(e&&n!==e){var o=i,a=t.getSelection().getRanges()[0];if(a.collapsed){var u=t.elementPath(),c=u.contains(function(t){return o.checkElementRemovable(t)});if(c){var l,s,f=a.checkBoundaryOfElement(c,CKEDITOR.START),d=a.checkBoundaryOfElement(c,CKEDITOR.END);if(f&&d){for(s=a.createBookmark();l=c.getFirst();)l.insertBefore(c);c.remove(),a.moveToBookmark(s)}else f?a.moveToPosition(c,CKEDITOR.POSITION_BEFORE_START):d?a.moveToPosition(c,CKEDITOR.POSITION_AFTER_END):(a.splitElement(c),a.moveToPosition(c,CKEDITOR.POSITION_AFTER_END),r(a,u.elements.slice(),c));t.getSelection().selectRanges([a])}}else t.removeStyle(o)}}function o(e,n,r){this.styleDefinition={element:e,styles:{}},this.styleDefinition.styles[n]="#("+s+")",t.assign(this.styleDefinition,r)}function a(t,e){var n={};return n[s]=t,new CKEDITOR.style(e,n)}function u(t){return a("inherit",t)}function c(t,e){var n=t.getStyle(e);return n||0===n||(n=void 0),n}function l(e){return t.keys(e.styles)[0]}var s="STYLE_VAR";return o.prototype={contextSensitive:!0,exec:function(t,e){return i(t,this.state,e,u(this.styleDefinition)),e!==CKEDITOR.TRISTATE_OFF?t.applyStyle(a(e,this.styleDefinition)):t.removeStyle(u(this.styleDefinition)),!0},refresh:function(t,r){var i,o=n(r,u(this.styleDefinition));0===o.length?i=CKEDITOR.TRISTATE_OFF:(o.length>1&&e.error.nestedStyles(),i=c(o[0],l(this.styleDefinition))),this.setState(i)}},o}),i("commands/formatBlockCommand",["utils/selectionUtils"],function(t){"use strict";function e(t){this.classNamePrefix=t}function n(t,e){var n;for(n=0;n<t.length;n++)if(0===t[n].indexOf(e))return t[n];return null}return e.prototype={contextSensitive:!0,exec:function(e,n){var r,i,o=this;t.enlargeSelectionToBlock(e),n.shouldRetainThemesAndStyles||e.execCommand("resetThemeAndStyles");var a=new CKEDITOR.style({attributes:{"class":n["class"]}});t.getSelectedBlocks(e,!0).forEach(function(t){t.renameNode(n.tag),a.applyToObject(t,e),r=r||t,i=t}),t.setSelectionBetweenElements(e,r,i),t.getSelectedLists(e).forEach(function(t){o.applyOnElement(n,t)}),this.setState({tag:n.tag,"class":r.getAttribute("class")})},refresh:function(t,e){var r=e.block||e.blockLimit,i=r.getAttribute("class");this.classNamePrefix&&(i=n(r.$.classList,this.classNamePrefix)),this.setState({tag:r.getName(),"class":i})},applyOnElement:function(t,e){var n=(e.getAttribute("class")||"").split(" ").filter(function(t){return/^font_\d+$/.test(t)});n.forEach(function(t){return e.removeClass(t)}),e.addClass(t["class"])}},e}),i("commands/classCommand",["ckLodash","utils/biUtils","utils/selectionUtils"],function(t,e,n){"use strict";function r(t,e,n){this.elemType=t,this.classes=e,this.childRule=n}function i(e,n){return t.find(n,function(t){return e.hasClass(t)})}function o(e,n,r){return t.filter(e.elements,function(t){return t.getName()===n&&i(t,r)})}function a(t,e,n){return new CKEDITOR.style({element:t,attributes:{"class":e},childRule:n})}function u(e,r){var i={};return n.forEachSelectedElement(e,function(e){var n=e.getAttribute&&e.getAttribute("class");n&&t.forEach(r,function(t){n.indexOf(t)>=0&&(i[t]=!0)})}),t.keys(i)}function c(e,n,r){t.forEach(n,function(t){e.removeStyle(a(r,t))})}function l(e){var n=u(e,this.classes);this.state===CKEDITOR.TRISTATE_OFF||t.includes(n,this.state)||n.push(this.state),c(e,n,this.elemType)}return r.prototype={contextSensitive:!0,exec:function(e,n){l.call(this,e),n!==CKEDITOR.TRISTATE_OFF&&t.includes(this.classes,n)&&e.applyStyle(a(this.elemType,n,this.childRule))},refresh:function(t,n){var r,a=o(n,this.elemType,this.classes);0===a.length?r=CKEDITOR.TRISTATE_OFF:(a.length>1&&e.error.nestedStyles(),r=i(a[0],this.classes)),this.setState(r)}},r}),i("commands/wixColorCommands",["ckLodash","commands/styleCommand","commands/classCommand","utils/utils","utils/elementUtils","utils/constants","utils/selectionUtils"],function(t,e,n,r,i,o,a){"use strict";function u(t){var e,n=[];for(e=0;36>e;e++)n.push(t+e);return n}function c(t,e,n){e.getCommand(t).refresh(e,n)}function l(t,e){return t.getCommand(e).state}function s(t,e){this.inlineCommandName=t,this.classCommandName=e}function f(t){var e=t.getAttribute&&t.getAttribute("class");return e&&-1!==e.indexOf("wixGuard")?!0:!1}function d(t){t.addCommand("foreColorInline",new e("span","color")),t.addCommand("foreColorClass",new n("span",u(o.COLOR_CLASS_PREFIX))),t.addCommand("foreColor",new s("foreColorInline","foreColorClass"))}function h(t){t.addCommand("backColorInline",new e("span","background-color",{childRule:f})),t.addCommand("backColorClass",new n("span",u(o.BACKCOLOR_CLASS_PREFIX),f)),t.addCommand("backColor",new s("backColorInline","backColorClass"))}var m=new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/);return s.prototype={contextSensitive:!0,exec:function(e,n){var r=this;e.undoManager.lock(!0),m.test(n)?(e.execCommand(this.classCommandName,CKEDITOR.TRISTATE_OFF),e.execCommand(this.inlineCommandName,n)):(e.execCommand(this.inlineCommandName,CKEDITOR.TRISTATE_OFF),e.execCommand(this.classCommandName,n)),t.forEach(a.getSelectedLists(e),function(t){r.applyOnElement(n,t)}),e.undoManager.unlock()},refresh:function(t,e){c(this.inlineCommandName,t,e);var n=l(t,this.inlineCommandName);n!==CKEDITOR.TRISTATE_OFF?(m.test(n)||(n=CKEDITOR.tools.convertRgbToHex(n)),this.setState(n.toUpperCase())):(c(this.classCommandName,t,e),this.setState(l(t,this.classCommandName)))},applyOnElement:function(t,e){"forecolor"===this.name&&(e.removeStyle("color"),i.removeClassesWithPrefix(e,"color_"),m.test(t)?e.setStyle("color",t):t!==CKEDITOR.TRISTATE_OFF&&e.addClass(t))}},{initForeColorCommand:d,initBackColorCommand:h}}),i("commands/basicStyleCommands",[],function(){"use strict";function t(t,e,n,r){var i=new CKEDITOR.style(e),o=new CKEDITOR.styleCommand(i,n);return t.attachStyleStateChange(i,function(e){t.readOnly||t.getCommand(r).setState(e)}),o}function e(e){var n="unBold",r={element:"span",styles:{"font-weight":"normal"},childRule:function(t){return""===t.$.style.textShadow}},i={contentForms:[["span",function(t){var e=t.styles["font-weight"];return"normal"===e||700>e}]]},o=t(e,r,i,n);e.addCommand(n,o)}function n(e){var n="unItalic",r={element:"span",styles:{"font-style":"normal"},childRule:function(t){return""===t.$.style.textShadow}},i={contentForms:[["span",function(t){var e=t.styles["font-style"];return"normal"===e}]]},o=t(e,r,i,n);e.addCommand(n,o)}return{initUnBold:e,initUnItalic:n}}),i("utils/styleUtils",[],function(){"use strict";function t(t,e,n){if(!n.isReadOnly()){var r=t!==CKEDITOR.TRISTATE_OFF;r?n.setStyle(e,t):n.removeStyle(e)}}return{applyStyle:t}}),i("commands/listCommand",["ckLodash","utils/selectionUtils","utils/rangeUtils","utils/elementUtils","utils/findElementUtils","utils/styleUtils"],function(t,e,n,r,i,o){"use strict";function a(n){var r=e.getSelectedRange(n);return t.filter(r.startPath().elements,function(e){var n=e.$.nodeName.toLowerCase();return!t.includes(["body","ul","ol","li"],n)})}function u(n){var o=n.editor,u=n.data[0];u&&!o.editable().contains(u)&&(u=t.find(e.getSelectedRange(o).startPath().elements,function(e){return CKEDITOR.dtd.$list[t.invoke(e,"getName")]}));var c=a(o);c&&u?(t.forEach(c,function(e){r.cloneStylesToElement(e,u,function(e){return!t.includes(["background-color","text-shadow","margin-left","margin-right","text-decoration","text-decoration-line","text-decoration-color","text-decoration-style"],e)}),r.cloneClassesToElement(e,u,function(e){return!t.startsWith(e,"backcolor_")&&!t.startsWith(e,"wixGuard")})}),e.getSelectedBlocks(o,!0).forEach(function(t){return t.removeAttribute("dir")}),d(o,"justify"+i.findFirstTextBlock(o,u).getStyle("text-align")),e.getSelectedListItems(o).forEach(function(t){l(o,t,"line-height")})):c||console.error("Failed to create styled list")}function c(e,n,r){if(e&&n&&r){var i=new CKEDITOR.dom.elementPath(e,n);return t.chain(i.elements).reject(function(t){return n.equals(t)}).filter(function(t){return t.$.style[r]}).first().get("$.style["+r+"]").value()||CKEDITOR.TRISTATE_OFF}return CKEDITOR.TRISTATE_OFF}function l(t,e,n){var r=i.findFirstNonEmptyTextNode(t,e),a=c(r,e,n);o.applyStyle(a,n,e)}function s(t){var r=t.getCommand("bidirtl").state===CKEDITOR.TRISTATE_ON?"rtl":"ltr";e.getSelectedLists(t,!0).forEach(function(e){var i=new CKEDITOR.dom.range(t.editable());i.selectNodeContents(e),i.shrink(),n.getBlocks(i,!0).forEach(function(t){t.removeAttribute("dir")}),window.getComputedStyle(e.$).direction!==r?e.setAttribute("dir",r):e.removeAttribute("dir")})}function f(t,e){var r=new CKEDITOR.dom.range(t.editable());r.selectNodeContents(e),r.shrink(),n.getBlocks(r,!0).forEach(function(t){t.removeStyle("text-align")})}function d(n,r){var i=e.getSelectedLists(n,!0);i.length&&!function(){i.forEach(function(t){var e=r.replace("justify","").replace("block","justify");f(n,t),t["center"===e?"addClass":"removeClass"]("wix-list-text-align"),t.setStyle("text-align",e)});var o=e.getSelectedRange(n).startPath();t.forEach(["justifyleft","justifycenter","justifyright","justifyblock"],function(t){n.getCommand(t).refresh(n,o)})}()}function h(t){e.getSelectedListItems(t).forEach(function(e){l(t,e,"line-height")})}function m(n,r){var i=E(r);g(r)&&i?e.getSelectedLists(n).forEach(function(t){return l(n,t,i)}):p(r)?d(n,t.get(r,"data.name")):v(r)?s(n):_(r)&&h(n)}var g=function(e){return t.includes(["italic","bold","unItalic","unBold"],t.get(e,"data.name"))},p=function(e){return t.includes(["justifyleft","justifycenter","justifyright","justifyblock"],t.get(e,"data.name"))},v=function(e){return t.includes(["bidiltr","bidirtl"],t.get(e,"data.name"))},_=function(e){return t.includes(["lineHeight"],t.get(e,"data.name"))},E=function(e){return t.keys(t.get(e,"data.command.style._.definition.styles"))[0]};return{init:function(t){var e=t.getCommand("numberedlist"),n=t.getCommand("bulletedlist");e.on("listChange",u),n.on("listChange",u),t.on("afterCommandExec",function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];return m.apply(void 0,[t].concat(n))})}}}),i("commands/letterSpacingCommand",["commands/styleCommand","utils/utils"],function(t,e){"use strict";function n(){t.call(this,"span","letter-spacing")}return n.prototype=Object.create(t.prototype),n.prototype.refresh=function(n,r){if(t.prototype.refresh.call(this,n,r),/px/.test(this.state)){var i=e.getBlockParent(r),o=getComputedStyle(i.$)["font-size"],a=parseFloat(this.state)/parseFloat(o);this.setState(a+"em")}},n}),i("commands/fontSizeCommand",["commands/styleCommand","utils/styleUtils","utils/selectionUtils","ckLodash"],function(t,e,n,r){"use strict";function i(){t.call(this,"span","font-size",{attributes:{"class":"inherit-font-size"}})}function o(){t.call(this,"span","font-size")}i.prototype=Object.create(t.prototype),o.prototype=Object.create(t.prototype);var a=new i;return o.prototype.exec=function(i,o){var u=this;if(n.isSelectedTextEmpty(i))return t.prototype.exec.call(this,i,CKEDITOR.TRISTATE_OFF),void a.exec(i,o);t.prototype.exec.call(this,i,o);var c=r.partial(e.applyStyle,o,"font-size"),l=o===CKEDITOR.TRISTATE_OFF;n.getSelectedBlocks(i,l).forEach(c),r.forEach(n.getSelectedLists(i),function(t){u.applyOnElement(o,t)})},o.prototype.applyOnElement=function(t,e){e.setStyle("fontSize",t)},o}),i("commands/lineHeightCommand",["utils/styleUtils","utils/selectionUtils","utils/rangeUtils","ckLodash"],function(t,e,n,r){"use strict";
return{contextSensitive:!0,exec:function(n,i){var o=r.partial(t.applyStyle,i,"line-height");e.getSelectedBlocks(n,!0).forEach(o),this.setState(i),setTimeout(function(){n.execCommand("autogrow")},2)},refresh:function(t){var r=e.getSelectedRange(t);if(r){var i,o=n.getStartAndEndBlock(r).startBlock;i=o?o.getStyle("line-height")||CKEDITOR.TRISTATE_OFF:null,this.setState(i)}}}}),i("commands/resetThemesAndStylesCommand",["utils/elementUtils","utils/selectionUtils"],function(t,e){"use strict";var n=["fontSize","bold","unBold","italic","unItalic","fontFamily","foreColor","underline","textShadow","backColor","letterSpacing"],r=["font-size","font-weight","font-style","font-family","color","text-decoration","text-shadow","background-color","letter-spacing"];return{exec:function(t){t.undoManager.save(),t.undoManager.lock(!0);var i,o;for(i=0;i<n.length;i++)o=t.getCommand(n[i]),o.style?t.removeStyle(o.style):o.exec(CKEDITOR.TRISTATE_OFF);e.getSelectedLists(t).forEach(function(t){r.forEach(function(e){t.removeStyle(e)})}),t.undoManager.unlock()},applyOnElement:function(e,n){n.removeAttributes(["class","style"]),t.cloneClassesToElement(n.getFirst(),n)},canUndo:!0}}),i("commands/resetThemeCommand",["utils/selectionUtils"],function(t){"use strict";var e=["fontSize","bold","unBold","italic","unItalic","fontFamily","foreColor"],n=["font-family","font-weight","font-size","font-style","color"];return{exec:function(r){r.undoManager.lock(!0),t.enlargeSelectionToBlock(r);var i,o;for(i=0;i<e.length;i++)o=r.getCommand(e[i]),o.style?r.removeStyle(o.style):o.exec(CKEDITOR.TRISTATE_OFF);t.getSelectedLists(r).forEach(function(t){n.forEach(function(e){t.removeStyle(e)})}),r.undoManager.unlock()},canUndo:!1}}),i("commands/toUpperCaseCommand",["utils/selectionUtils"],function(t){"use strict";function e(t){var e=t.startContainer,n=t.clone();if(e.type===CKEDITOR.NODE_TEXT&&e.getText()){var r=e.$.textContent.substring(0,t.startOffset),i=e.$.textContent.substring(t.startOffset).toLocaleUpperCase();e.$.textContent=r+i}n.select()}function n(t){var e=t.endContainer,n=t.clone();if(e.type===CKEDITOR.NODE_TEXT&&e.getText()){var r=e.$.textContent.substring(0,t.endOffset).toLocaleUpperCase(),i=e.$.textContent.substring(t.endOffset);e.$.textContent=r+i}n.select()}function r(t){var e=t.endContainer,n=t.clone();if(e.type===CKEDITOR.NODE_TEXT&&e.getText()){var r=e.$.textContent.substring(0,t.startOffset),i=e.$.textContent.substring(t.startOffset,t.endOffset).toLocaleUpperCase(),o=e.$.textContent.substring(t.endOffset);e.$.textContent=r+i+o}n.select()}return{exec:function(i){var o,a=t.getSelectedRange(i),u=new CKEDITOR.dom.walker(a);if(a.startContainer.equals(a.endContainer)&&a.endContainer.type===CKEDITOR.NODE_TEXT)return void r(a);var c=a.clone();for(e(a),n(a);o=u.next();)o.type!==CKEDITOR.NODE_TEXT||!o.getText()||o.equals(a.startContainer)||o.equals(a.endContainer)||(o.$.textContent=o.$.textContent.toLocaleUpperCase());c.select()}}}),i("commands/wixCSS",["ckLodash"],function(t){"use strict";function e(t,e,n){var r=new CKEDITOR.dom.element("style",t.document);return r.setAttribute("id",e),r.setAttribute("type","text/css"),r.appendText(n),r}function n(t,e,n){var r=new CKEDITOR.dom.element("link",t.document);return r.setAttribute("id",e),r.setAttribute("type","text/css"),r.setAttribute("rel","stylesheet"),r.setAttribute("href",n),r}function r(t,e){return t.document.getById(e)}function i(t,e){var n=r(t,e);n&&n.remove()}function o(e,n){var i=r(e,n.id);return i&&t.isEqual(i.getText(),n.value)}function a(e,n){var i=r(e,n.id);return i&&t.isEqual(i.getAttribute("href"),n.value)}var u={exec:function(t,r){if(r.force||!o(t,r)&&!a(t,r)){i(t,r.id);var u;u=r.isLink?n(t,r.id,r.value):e(t,r.id,r.value);var c=t.document.getHead();c.append(u)}},canUndo:!1,editorFocus:!1};return function(){return u}}),i("commands/wixLink",["utils/utils","ckLodash","utils/selectionUtils","utils/elementUtils","utils/rangeUtils"],function(t,e,n,r,i){"use strict";function o(){}function a(){}function u(t,e){var n=new CKEDITOR.style({element:"a",attributes:t});n.type=CKEDITOR.STYLE_INLINE,n.applyToRange(e),e.select()}function c(t,e){var n=new CKEDITOR.dom.element("a");n.setAttributes(t),n.setHtml(e.getSelectedHtml().getHtml()),e.insertElement(n),e.getSelection().selectElement(n)}function l(t,e,n){var r=t.getRanges(1)[0];r.startContainer.getUniqueId()===r.endContainer.getUniqueId()?u(e,r):c(e,n)}function s(t,e){l(t.getSelection(),e,t),t.getCommand("underline").state===CKEDITOR.TRISTATE_OFF&&t.execCommand("underline")}function f(t){var e=t.getSelection(),o=e.getSelectedElement();if(o&&o.is("a"))return o;var a=n.getSelectedRange(t);return a?r.getElementFromPath(a.startPath(),"a")||i.getElementFromRange(a,"a",!0)||null:null}function d(t){var e=f(t);m(e);var n=h(e);g(t,n)}function h(e){for(var n=e.getParent();1===n.getChildCount()&&!t.isBlockElement(n.getName());)e=n,n=n.getParent();return e}function m(t){"br"===e.result(t.getLast(),"getName")&&t.getLast().remove()}function g(t,e){var n=t.createRange();n.setStartAfter(e),n.collapse(!0),n.select()}var p=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});return o.prototype={canUndo:!0,editorFocus:CKEDITOR.env.ie||CKEDITOR.env.webkit,contextSensitive:!0,exec:function(t,e){t.undoManager.save(),t.undoManager.lock(!0),t.execCommand("wixUnlink"),s(t,e),this.refresh(t),d(t),t.fire("change"),t.undoManager.unlock()},refresh:function(t){var e=f(t);e?this.setState(e.getAttribute("dataQuery")):this.setState(null)},canPerformCmd:function(t){if(n.isMultipleBlockSelection(t))return!1;var e=t.getSelectedHtml();return e&&null!==e.$?n.isSelectedTextEmpty(t)?!!t.elementPath().contains("a"):!0:!1}},a.prototype={exec:function(t){t.getCommand("wixSelectLinks").exec(),t.undoManager.lock(!0),t.execCommand("underline"),t.getCommand("underline").state===CKEDITOR.TRISTATE_ON&&t.execCommand("underline"),t.undoManager.unlock(),t.removeStyle(p)},refresh:function(t,e){var n=e.lastElement&&e.lastElement.getAscendant("a",!0);n&&"a"===n.getName()&&n.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)}},{init:function(t){t.addCommand("wixLink",new o),t.addCommand("wixUnlink",new a)}}}),i("commands/wixSelectLinks",["utils/selectionUtils","utils/elementUtils","utils/findElementUtils"],function(t,e,n){"use strict";function r(){}function i(t,r,o){var a=n.getTextNodeNextToElement(t,r,o);if(!a)return t;var u=a.getParent(),c=u.is("a")?u:e.getElementFromPath("a",o.elementPath(u));return c&&c.getAttribute("dataquery")===t.getAttribute("dataquery")?i(c,r,o):t}return r.prototype={editorFocus:!1,exec:function(n){var r=t.getSelectedRange(n),o=e.getElementFromPath(r.startPath(),"a"),a=e.getElementFromPath(r.endPath(),"a");(o||a)&&(o&&r.setStartAt(i(o,!0,n),CKEDITOR.POSITION_AFTER_START),a&&r.setEndAt(i(a,!1,n),CKEDITOR.POSITION_BEFORE_END),r.select())}},r}),i("commands/fontFamilyCommand",["commands/styleCommand","utils/selectionUtils"],function(t,e){"use strict";function n(){t.call(this,"span","font-family")}return n.prototype=Object.create(t.prototype),n.prototype.exec=function(n,r){var i=this;t.prototype.exec.call(this,n,r),e.getSelectedLists(n).forEach(function(t){return i.applyOnElement(r,t)})},n.prototype.applyOnElement=function(t,e){e.setStyle("fontFamily",t)},n}),i("wixPaste/DataTransformer",["ckLodash","utils/utils","utils/constants"],function(t,e,n){"use strict";function r(t){var e=CKEDITOR.htmlParser.fragment.fromHtml(this._htmlData),n=new CKEDITOR.htmlParser.basicWriter;t.applyTo(e),e.writeHtml(n);var r=n.getHtml();return this._htmlData=r,this}function i(){var t=new CKEDITOR.filter("h1 h2 h3 h4 h5 h6 p ul ol li br a[href, dataquery]");return r.call(this,t)}function o(){this._htmlData=this._htmlData.replace(/<\/?span.*?>/g,""),this._htmlData=this._htmlData.replace(/(<a .*?>.*?<\/a>)/g,function(t,e){return'<span style="text-decoration:underline">'+e+"</span>"})}function a(){return this._containsList||A.call(this),this._containsList}function u(){return this._htmlData=this._htmlData.replace(K.getTagsRegexp(),function(t,e){return"<"+e+' class="'+K[e]+'">'}),this}function c(e){var n=document.createElement("div");n.innerHTML=e;var r=document.createElement("div"),i=Array.prototype.slice.call(n.childNodes);return t.forEach(i,function(t){if(t.nodeName&&"li"===t.nodeName.toLowerCase())r.appendChild(t);else{var e=document.createElement("li");e.appendChild(t),r.appendChild(e)}}),r.innerHTML}function l(e){var n=this;return e&&e.nodeName?(e.innerHTML=e.innerHTML&&u.call({_htmlData:e.innerHTML})._htmlData,e.nodeName.toLowerCase().match(/^(ul|ol)$/)?e.innerHTML=c.call(this,e.innerHTML):"li"===e.nodeName.toLowerCase()&&(e.innerHTML=f.call(this,e.innerHTML)),t.forEach(t.toArray(e.childNodes),function(t){return l.call(n,t)}),this):this}function s(){var e=document.createElement("div");e.innerHTML=this._htmlData;var n=e.querySelectorAll("ol, ul");return n&&(n=Array.prototype.slice.call(n).reverse(),t.forEach(n,function(t){var e=t.querySelector("[class^=font_]"),n=e&&e.classList[0]||"font_8";t.className=n})),this._htmlData=e.innerHTML,this}function f(e){var r=this,i=document.createElement("div");if(""===e)return'<p class="font_8"><span class="wixGuard">'+n.WIX_GUARD+"</span></p>";i.innerHTML=t.isUndefined(e)?this._htmlData:e;var o=document.createElement("div"),a=null,u=Array.prototype.slice.call(i.childNodes);return t.forEach(u,function(t){l.call(r,t),CKEDITOR.dtd.$block[t.nodeName.toLowerCase()]?(a=null,o.appendChild(t)):(a||(a=document.createElement("p"),o.appendChild(a)),a.appendChild(t))}),t.isUndefined(e)?(y.call(this,o.innerHTML),this):o.innerHTML}function d(){return this.getBlockCount()&&this.fixOrphans().trimEmptyLines().fixDefaultThemesForTags().fixListThemes(),this}function h(){return this._blockCount||A.call(this),this._blockCount}function m(){var e=document.createElement("div");e.innerHTML=this._htmlData;var n=document.createDocumentFragment(),r=Array.prototype.slice.call(e.childNodes);return t.forEach(r,function(t){n.appendChild(t)}),new CKEDITOR.dom.documentFragment(n)}function g(){return this._htmlData=this._htmlData.replace(/<br.*?data-cke-eol.*?>/g,""),this}function p(t,n){var r=CKEDITOR.dtd.$block[t.nodeName.toLowerCase()],i=e.isWhiteSpace(t.textContent);return r&&i?(n.removeChild(t),!0):void 0}function v(e){var n=document.createElement("div");n.innerHTML=this._htmlData;var r=n.querySelectorAll(e);return t.forEach(r,function(t){for(var e=t.parentNode;t.childNodes.length;)e.insertBefore(t.childNodes[0],t);e.removeChild(t)}),this._htmlData=n.innerHTML,this}function _(){return x.call(this),v.call(this,"a")}function E(){return x.call(this),v.call(this,'span[style*="text-decoration"]')}function y(t){this._htmlData=t||"",this._blockCount=null,this._containsList=null}function C(t){y.call(this,t)}function T(t){for(var e,n=[],r=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1);e=r.nextNode();)n.push(e);return n}function x(){if(this.getBlockCount())throw new Error("implemented for 0 blocks only")}function b(){var t=document.createElement("div");t.innerHTML=this._htmlData;var e,n,r=Array.prototype.slice.call(t.childNodes);for(n=0;n<r.length&&(e=r[n],p(e,t));n++);for(r=Array.prototype.slice.call(t.childNodes),n=r.length-1;n>=0&&(e=r[n],p(e,t));n--);return y.call(this,t.innerHTML),this}function O(){return 1!==h.call(this)||a.call(this)||y.call(this,this._htmlData.replace(/<([^\s>]*).*?>(.*)<\/\1>/,"$2")),this}function S(){return this.getBlockCount()?(y.call(this,c.call(this,this._htmlData)),this):this}function I(e,n,r){var i=document.createElement("div");i.innerHTML=this._htmlData;var o=T(i);return t.forEach(o,function(t){var i=document.createElement(e);i.setAttribute(n,r),i.innerHTML=t.textContent;var o=t.parentNode;o.replaceChild(i,t)}),this._htmlData=i.innerHTML,this}function k(){return x.call(this),I.call(this,"span","style","text-decoration:underline")}function R(t){return x.call(this),I.call(this,"a","dataquery",t)}function w(e){return!!t.find(e,function(t){return CKEDITOR.dtd.$list[t.nodeName.toLowerCase()]})}function D(e){return t.filter(e,function(t){return CKEDITOR.dtd.$block[t.nodeName.toLowerCase()]}).length}function A(){if(!this._blockCount){var t=document.createElement("div");t.innerHTML=this._htmlData;var e=Array.prototype.slice.call(t.childNodes);this._blockCount=D(e),this._containsList=w(e)}}function N(t,e,n){if(this._htmlData=t,this._blockCount=null,this._containsList=null,this._editor=n,e===!1){var i=new CKEDITOR.filter(n);i.disallow("ul ol li"),r.call(this,i)}}var K={h1:"font_0",h2:"font_2",h3:"font_3",h4:"font_4",h5:"font_5",h6:"font_6",p:"font_8"};return Object.defineProperty(K,"tagsRegexStr",{enumerable:!1,value:"<("+t.map(t.keys(K)).join("|")+")>"}),Object.defineProperty(K,"getTagsRegexp",{enumerable:!1,value:function(){return new RegExp(this.tagsRegexStr,"g")}}),N.prototype={cleanExternalHtml:i,cleanInternalHtml:o,containsList:a,fixDefaultThemesForTags:u,fixListThemes:s,fixOrphans:f,fixTextBlocks:d,getBlockCount:h,getCKDocumentFragment:m,removeCkBrEol:g,removeLinks:_,removeUnderlines:E,setHtmlData:C,trimEmptyLines:b,unWrapIfSingleBlock:O,wrapBlocksInLi:S,wrapTextNodesInUnderline:k,wrapTextNodesInATag:R,getHtml:function(){return this._htmlData}},N}),i("utils/pasteUtils",["ckLodash","utils/selectionUtils","utils/utils","utils/rangeUtils","utils/guardUtils","utils/elementUtils"],function(t,e,n,r,i,o){"use strict";function a(t,e,n,i){var o=e.startContainer,a=new CKEDITOR.dom.range(t.editable());if(a.selectNodeContents(n),i===y)a.setEnd(o,e.startOffset);else{if(i!==T)throw new Error("block position must be one of START_BLOCK or END_BLOCK");a.setStart(o,e.startOffset)}return r.getText(a)}function u(t,e,r){var i=a(t,e,r,y);if(n.isWhiteSpace(i))return y;var o=a(t,e,r,T);return n.isWhiteSpace(o)?T:C}function c(t,e,r,i){if(0===i)return x;var o=r.getText();return!o||n.isWhiteSpace(o)?E:u(t,e,r)}function l(t,r,i,o){var a=o||r,u=n.getCKDocumentFragment(i.getHtml());u.insertAfterNode(a);for(var c=a.$,l=0;l<i.getBlockCount();l++)c=c.nextElementSibling;c=new CKEDITOR.dom.element(c);var s=new CKEDITOR.dom.range(t.editable());s.selectNodeContents(e.findLastTextNode(t,c)),s.collapse(),s.select()}function s(t,e,i,o){var a=o||e,u=n.getCKDocumentFragment(i.getHtml());u.insertBefore(a);var c=new CKEDITOR.dom.range(t.editable());c.selectNodeContents(t.editable()),c.setEndBefore(a);var l=r.findLastNonEmptyTextNode(c);c.selectNodeContents(l),c.collapse(!1),c.select()}function f(t,e,n,r){var i=r||e;s(t,e,n,r),i.remove()}function d(t,e){return t.type===CKEDITOR.NODE_TEXT&&t.getParent().equals(e)}function h(t,e,n){t.splitElement(e);var i=e.getNext();if(o.isElementTextEmpty(e))return e.remove(),r.createRange(i,i,0);if(!o.isElementTextEmpty(i))for(;i.getChildCount()>0;)e.append(i.getChild(0));return i.remove(),r.createRange(e,e,n)}function m(e,n){return t.find(e.startPath().elements,function(t){return t.getParent().equals(n)}).getIndex()+1}function g(t,e){if(d(t.startContainer,e)||t.startContainer.equals(e))return null;var n=m(t,e);return h(t,e,n)}function p(t,e,n,r,i){i||(r=g(r,n)||r),t.insertHtml(e.getHtml(),"text",r)}function v(t,e,r,i){var o=r.getRange(),a=n.getBlockParent(o.startPath()),u=o.startPath().contains("li");switch(c(t,o,a,e.getBlockCount())){case x:p(t,e,a,o,i);break;case E:f(t,a,e,u);break;case y:s(t,a,e,u);break;case C:t.insertHtml(e.getHtml());break;case T:l(t,a,e,u)}}function _(){v.apply(null,arguments)}var E=0,y=1,C=2,T=3,x=4;return{cleanInsertHtml:_}});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();i("wixPaste/SelectionIntention",["utils/guardUtils","utils/utils","utils/rangeUtils","utils/elementUtils"],function(t,n,r,i){"use strict";return function(){function o(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!0;e(this,o),this.container=n,this.offset=r,this.editor=t,i&&this.setAfterGuard()}return a(o,[{key:"setAfterGuard",value:function(){var e=new CKEDITOR.dom.elementPath(this.container),r=n.getBlockParent(e),i=t.getGuard(r);i&&e.contains(i)&&(this.container=i.getParent(),this.offset=i.getIndex()+1)}},{key:"getRange",value:function(){return r.createRange(this.editor.editable(),this.container,this.offset)}},{key:"getThemeClass",value:function(){var t=new CKEDITOR.dom.elementPath(this.container),e=n.getBlockParent(t);return i.getTheme(e)}}]),o}()}),i("wixPaste/deleteContents",["ckLodash","utils/selectionUtils","utils/rangeUtils","utils/utils","utils/elementUtils","wixPaste/SelectionIntention"],function(t,e,n,r,i,o){"use strict";function a(e,n,r){t.forEach(e.elements,function(t){return n.editable().contains(t)?t.contains(r.container)||t.equals(r.container)?!1:i.isElementTextEmpty(t)?void t.remove():!1:void 0})}function u(t){var r=e.getSelectedRange(t);return n.isEndBlockFullyInRange(r)||!n.isStarBlockFullyInRange(r)}function c(t,e){return e.startContainer.type===CKEDITOR.NODE_TEXT&&0===e.startOffset?new o(t,e.startContainer.getParent(),e.startContainer.getIndex()):new o(t,e.startContainer,e.startOffset)}function l(t,e){return e.endContainer.type===CKEDITOR.NODE_TEXT?new o(t,e.endContainer.getParent(),0):new o(t,e.endContainer,0)}function s(t){var n=e.getSelectedRange(t);return u(t)?c(t,n):l(t,n)}function f(t){var n=e.getSelectedRange(t),r=s(t),i=u(t)?n.endPath():n.startPath();return n.deleteContents(!1),a(i,t,r),r}function d(t){var n=e.getSelectedRange(t),r=n.endPath(),i=c(t,n);return n.deleteContents(!0),a(r,t,i),i}function h(t){return e.isMultipleBlockSelection(t,!0)?f(t):d(t)}return{deleteSelectionContents:h}}),i("wixPaste/wixCopy",["ckLodash","utils/selectionUtils","utils/utils","utils/elementUtils"],function(t,e,n,r){"use strict";function i(t,e){return t.startContainer.equals(e)&&t.startOffset>0?t.endContainer.equals(e)?e.getText().substr(t.startOffset,t.endOffset-t.startOffset):e.getText().substr(t.startOffset):t.endContainer.equals(e)?e.getText().substr(0,t.endOffset):e.getText()}function o(e){var r=new CKEDITOR.dom.elementPath(e),i=n.getBlockParent(r);return{wrappingElements:t.takeWhile(r.elements,function(t){return!i.equals(t)}),textBlock:i}}function a(e){return t.reduce(e,function(e,n){var r=n.getAttribute("style"),i=n.getAttribute("class");return r?e.push(r.split(":")[0]):i&&t.startsWith(i,"color_")&&e.push("color"),e},[])||[]}function u(t,e,n){for(var r=new CKEDITOR.dom.text(i(e,n)),o=t,a=Array.isArray(o),u=0,o=a?o:o[Symbol.iterator]();;){var c;if(a){if(u>=o.length)break;c=o[u++]}else{if(u=o.next(),u.done)break;c=u.value}var l=c;r=r.appendTo(l.clone(!1))}return{node:r,html:r.$.outerHTML||r.$.textContent}}function c(t,e,n){var r=new CKEDITOR.dom.element("span");return r.setAttribute("style",e+":"+t),n=n.appendTo(r)}function l(e,n,r){var i=t(["font-size","font-weight","font-family","font-style","color"]).filter(function(n){return!t.includes(e,n)}).reduce(function(t,e){var r=CKEDITOR.tools.convertRgbToHex(n.getComputedStyle(e));return c(r,e,t)},r);return{node:i,html:i.$.outerHTML}}function s(t,e){var n=o(e),r=n.wrappingElements,i=n.textBlock,c=a(r),s=u(r,t,e),f=s.node,d=s.html,h=l(c,i,f),m=h.html;return{textWithOverrides:d,textWithAllThemeOverrides:m}}function f(t){return e.isMultipleBlockSelection(t,!0)||e.getSelectedRange(t).collapsed}function d(t){var i=n.getBlockParent(e.getSelectedRange(t).startPath());g={textWithOverrides:"",textWithAllThemeOverrides:"",lastCopiedTextNoSpace:n.removeSpaces(t.getSelection().getSelectedText()),theme:r.getTheme(i)},n.isIE()&&(g.ieHtml=t.getSelectedHtml().getHtml())}function h(n){if(d(n),f(n))return null;g.hasSavedState=!0;var r=e.getTextNodesInSelection(n),i=e.getSelectedRange(n);return t.forEach(r,function(t){var e=s(i,t);g.textWithAllThemeOverrides+=e.textWithAllThemeOverrides,g.textWithOverrides+=e.textWithOverrides}),g}function m(e){e.on("contentDom",function(){var n=e.editable();t.forEach(["cut","copy"],function(t){n.on(t,function(){h(e)})})})}var g;return{createLastCopiedFromInsideCkWithInjectedData:h,init:m,getLastCopiedData:function(){return g||{}}}}),i("wixPaste/wixPaste",["wixPaste/DataTransformer","ckLodash","utils/utils","utils/selectionUtils","utils/pasteUtils","wixPaste/deleteContents","wixPaste/wixCopy"],function(t,e,n,r,i,o,a){"use strict";function u(){return!(CKEDITOR.env.gecko||CKEDITOR.env.ie)}function c(t,e,n){var r={pasteString:e.getHtml(),isExternalSourceData:l(t)};if(n.fire("externalPasteHandle",r),e.getHtml()!==r.pasteString){var i=n.dataProcessor.toHtml(r.pasteString,{fixForBody:!1});e.setHtmlData(i)}}function l(t){var e;return e=!u()&&a.getLastCopiedData().lastCopiedTextNoSpace?a.getLastCopiedData().lastCopiedTextNoSpace!==n.removeSpaces(n.getPlainTextFromHtml(t.data.dataValue)):!t.data.dataTransfer.sourceEditor}function s(t,e){return!l(t)&&e.hasSavedState}function f(t,e,n){return n=t.getThemeClass()===e.theme?e.textWithOverrides:e.textWithAllThemeOverrides}function d(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.data.dataValue,i=a.getLastCopiedData();return s(t,i)?r=f(e,i,r):!l(t)&&n.isIE()&&(r=a.getLastCopiedData().ieHtml),r}function h(e,r){var i=!n.isListStateOn(e);return new t(r,i,e)}function m(t){var n=e.find(t.startPath().elements,function(t){return"a"===t.getName()});return e.invoke(n,"getAttribute","dataquery")}function g(t,e){var n=m(t.getRange());n&&e.removeUnderlines().removeLinks().wrapTextNodesInUnderline().wrapTextNodesInATag(n)}function p(t){t.cleanExternalHtml(),t.getBlockCount()&&t.fixOrphans().trimEmptyLines().fixDefaultThemesForTags().fixListThemes().unWrapIfSingleBlock()}function v(t,e,n){t.trimEmptyLines(),l(e)||t.getBlockCount()||g(n,t)}function _(t){return t.getCommand("numberedlist").state!==CKEDITOR.TRISTATE_OFF||t.getCommand("bulletedlist").state!==CKEDITOR.TRISTATE_OFF}function E(t,e,n,r){l(t)?p(e):v(e,t,n),_(r)&&e.wrapBlocksInLi()}function y(t){t.editor.undoManager.lock(!0);var e=void 0,n=t.editor;"drop"!==t.data.method&&(e=o.deleteSelectionContents(n));var r=d(t,e),a=h(n,r).removeCkBrEol();E(t,a,e,n),c(t,a,n),"drop"!==t.data.method?i.cleanInsertHtml(n,a,e,l(t)):n.insertHtml(a.getHtml(),a.getBlockCount()?"html":"text"),C(t),n.execCommand("autogrow")}function C(t){T(t.editor),t.cancel(),t.stop()}function T(t){t.undoManager.unlock(),t.fire("change")}function x(t){t.on("dragstart",function(t){t.cancel(),t.stop()}),t.on("paste",y,null,null,5),t.pasteFilter=null}return{init:x}}),i("eventHandlers/keyDownHandler",["ckLodash","utils/constants","utils/utils","utils/guardUtils","utils/elementUtils","utils/selectionUtils","utils/rangeUtils","utils/findElementUtils"],function(t,e,n,r,i,o,a,u){"use strict";function c(t,e){e=e||t.editable();var n=new CKEDITOR.dom.range(t.editable());n.selectNodeContents(e);var r=o.getSelectedRange(t);return n.setEnd(r.endContainer,r.endOffset),a.countBrInRange(n)}function l(t){if(n.getEditorTextLength(t)>0)return!1;if(t.editable().getChildCount()>1)return!1;var e=c(t);return 0===e}function s(t){t.data.$.preventDefault(),t.data.$.stopPropagation(),t.stop()}function f(t){return t===e.BACKSPACE_KEYCODE}function d(t){return t===e.DELETE_KEYCODE}function h(e,n){return t.includes(B,n)&&l(e)}function m(t){var n=t.data.$.keyCode;return t.data.$.shiftKey?n===e.RETURN_KEYCODE||n===e.ENTER_KEYCODE:!1}function g(e){var n=e.data.$.keyCode;return t.includes(N,n)||t.includes(K,n)||e.data.$.metaKey}function p(t){var e=t.data.$.keyCode;return 229===e}function v(t){return o.getSelectedRange(t).startPath().contains(u.findFirstTextBlock(t))}function _(e){var n=t.find(o.getSelectedRange(e).startPath().elements,function(t){return"wixGuard"===t.getAttribute("class")});if(n){var r=e.createRange();r.setStartAfter(n),r.select()}}function E(t){t.getCommand("numberedlist").state!==CKEDITOR.TRISTATE_OFF?(t.execCommand("numberedlist"),_(t)):t.getCommand("bulletedlist").state!==CKEDITOR.TRISTATE_OFF&&(t.execCommand("bulletedlist"),_(t))}function y(t,e,a,u){if(a.collapsed){var c=n.removeGuardsChars(e.$.textContent).length;if(c>1)return!1;if(r.hasGuard(e))return!1;if(0===c)return!0;if(f(u)&&i.getTextBeforeCursor(a,e).length)return!0;if(d(u)&&!i.getTextBeforeCursor(a,e).length)return!0}return o.isStartBlockTextFullySelected(t,e)}function C(t){var e=t.sender.editor,n=t.data.$.keyCode;return h(e,n)?(f(n)&&E(e,n),void s(t)):void b(t)}function T(t,n,i,o){t.collapsed||a.getText(t)===e.WIX_GUARD&&a.countBrInRange(t)<2?f(n)?r.setCursorBeforeGuard(i,o):r.setCursorAfterGuard(i,o):r.moveSelectionAfterGuard(i,o)}function x(t,e,n){var i=o.createBookmark(t);0===e.getText().length?r.insertGuard(t,e,i&&i.startNode,f(n)):r.insertGuard(t,e,d(n)&&i&&i.startNode),o.moveToBookmark(t,i)}function b(t){var e,i=t.sender.editor,a=t.data.$.keyCode,u=n.getBlockParent(o.getSelectedRange(i).startPath()),c=o.getSelectedRange(i);if(!(o.countBrTagsBeforeCursor(i,u)>1))return r.hasGuard(u)?void T(c,a,i,u):void(y(i,u,c,a)&&(c.collapsed?x(i,u,a):(e=o.createBookmark(i,n.isIE()),r.insertGuard(i,u,e&&e.startNode),o.moveToBookmark(i,e))))}function O(e,r){var o=n.getBlockParent(e.startPath()),a=n.getBlockParent(e.endPath()),u=!o.equals(a);e.deleteContents(!0);var c=i.isElementTextEmpty(a);if(u&&c){e.collapse(!0);var l=t.find(a.getParents(),function(t){return r.editable().equals(t.getParent())}),s=t.find(o.getParents(),function(t){return t.equals(l)});l&&!s&&l.remove()}}function S(t,i){var a=o.getSelectedRange(i),u=n.getBlockParent(a.startPath());if(!a.collapsed){if(i.undoManager.unlock(),O(a,i),y(i,u,a,e.ENTER_KEYCODE)){var c=o.createBookmark(i);c?r.insertGuard(i,u,c.startNode):r.insertGuard(i,u,a.startContainer),o.moveToBookmark(i,c),a=o.getSelectedRange(i),a.collapse(!0)}a.select(),i.undoManager.lock()}r.guardInSelection(i,u)&&b(t)}function I(t){var e=t.editable().getCustomData("cke-fillingChar");e&&(t.WIX.hijackedFillingChars.push(e),t.editable().removeCustomData("cke-fillingChar"))}function k(t){var e=o.getSelectedRange(t),i=e.startPath(),a=n.getBlockParent(i),u=r.getGuard(a);u&&(u.removeClass("wixGuard"),t.WIX.hijackedWixGuards=t.WIX.hijackedWixGuards||[],t.WIX.hijackedWixGuards.push({guard:u,parentBlock:a}),u.getChild(0).type===CKEDITOR.NODE_TEXT&&t.WIX.hijackedFillingChars.push(u.getChild(0)))}function R(t){k(t),CKEDITOR.env.webkit&&(t.WIX.hijackedFillingChars=t.WIX.hijackedFillingChars||[],I(t))}function w(t){var e=t.sender.editor;if(!g(t)){if(p(t))return void R(e);e.undoManager.lock(),(n.isFF()||n.isIE())&&o.fixSelectionOnBody(e),r.removeUneededGuards(e),m(t)?S(t,e):v(e)?C(t):b(t),D(t.data.$.keyCode,e),e.undoManager.unlock()}}function D(e,n){if(f(e)){var r=A(n);if(r){var i=r.getPrevious();if(i&&"li"===i.getName()){var a=o.findLastTextNode(n,i);a&&t.defer(function(){var t=n.createRange();t.setStartAfter(a),t.setEndAfter(a),t.collapse(),t.select()})}}}}function A(t){var e=o.getSelectedRange(t);if(!e||!e.collapsed)return null;var n=i.getElementFromPath(e.startPath(),"li");return n&&i.isElementTextEmpty(n)?n:void 0}var N=[e.PAGE_UP_KEYCODE,e.PAGE_DOWN_KEYCODE,e.END_KEYCODE,e.HOME_KEYCODE,e.LEFT_KEYCODE,e.UP_KEYCODE,e.RIGHT_KEYCODE,e.DOWN_KEYCODE],K=[e.SHIFT_KEYCODE,e.CONTROL_KEYCODE,e.ALT_KEYCODE],B=[e.BACKSPACE_KEYCODE,e.DELETE_KEYCODE].concat(N);return{handleKeyDown:w}}),i("eventHandlers/keyHandler",["eventHandlers/keyDownHandler","ckLodash","utils/selectionUtils","utils/constants","utils/elementUtils","utils/utils","utils/guardUtils"],function(t,e,n,r,i,o,a){"use strict";function u(t){for(var e=t.editable().find(".inherit-font-size"),n=0;n<e.count();n++){var r=e.getItem(n);i.isWhiteSpace(r)||r.removeClass("inherit-font-size")}}function c(e){e.sender.editor.WIX.isKeyDown=!0,t.handleKeyDown(e)}function l(t){var e=o.getBlockParent(n.getSelectedRange(t).startPath());if(i.isElementTextEmpty(e)&&!a.hasGuard(e)){var r=n.createBookmark(t),u=r&&r.startNode;u&&u.getIndex()&&(u=u.getParent().getChild(0)),a.insertGuard(t,e,u),n.moveToBookmark(t,r)}}function s(t){var r=n.getSelectedRange(t);if(r.collapsed){var a=o.getBlockParent(r.startPath());t.WIX.hijackedWixGuards=e.filter(t.WIX.hijackedWixGuards,function(e){return t.editable().contains(e.guard)&&t.editable().contains(e.parentBlock)?a.equals(e.parentBlock)?!0:(i.replaceElementByItsContents(e.guard),!1):!1})}}function f(t){var i=n.getSelectedRange(t);i.collapsed&&i.startContainer.type===CKEDITOR.NODE_TEXT&&(t.WIX.hijackedFillingChars=e.filter(t.WIX.hijackedFillingChars,function(e){return t.editable().contains(e)?i.startContainer.equals(e)?!0:(e.setText(e.getText().replace(new RegExp("["+r.CK_GUARD+r.WIX_GUARD+"]","g"),"")),!1):!1}))}function d(t){t.sender.editor.WIX.isKeyDown=!1;var e=t.sender.editor;e.undoManager.lock(),f(e),s(e),u(e),a.removeUneededGuards(e),h(e),l(e),e.undoManager.unlock(),e.fire("change")}function h(t){(o.isFF()||o.isIE())&&n.fixSelectionOnBody(t)}function m(t){return p.indexOf(t.data.name)>=0}function g(t){t.on("contentDom",function(){t.editable().on("keydown",c,null,null,-9999),t.editable().on("keyup",d)}),t.on("beforeCommandExec",function(e){if(m(e)){var r=o.getBlockParent(n.getSelectedRange(t).startPath());if(!a.hasGuard(r)||!n.getSelectedRange(t)||0!==n.countBrTagsBeforeCursor(t,r))return;a.expandSelectionToGuard(t,r)}})}var p=["bold","italic","underline","strike","subscript","superscript","fontSize","fontFamily","letterSpacing","textShadow","wixLink","wixUnlink","unBold","unItalic","foreColorInline","foreColorClass","foreColor","backColorInline","backColorClass","backColor"];return{init:g}}),i("eventHandlers/selectionChangeHandler",["utils/utils","utils/selectionUtils","utils/rangeUtils"],function(t,e){"use strict";function n(n){(t.isFF()||t.isIE())&&n.on("selectionCheck",function(){e.fixSelectionOnBody(n)},null,null,99999)}return{init:n}}),i("eventHandlers/inputEventHandler",["ckLodash","utils/utils"],function(t,e){"use strict";function n(t){var e=t.getStyle("letter-spacing");return/px/.test(e)}function r(t){var e,r=[],i=t.find('span[style*="letter-spacing:"]'),o=i.count();for(e=0;o>e;e++){var a=i.getItem(e);n(a)&&r.push(a)}return r}function i(t,e){var n=t.getStyle("letter-spacing"),r=getComputedStyle(e.$)["font-size"];return parseFloat(n)/parseFloat(r)}function o(t){var n=new CKEDITOR.dom.elementPath(t),r=e.getBlockParent(n),o=i(t,r);t.setStyle("letter-spacing",o+"em")}function a(e){var n=r(e);t.forEach(n,o),e.editor.WIX.isKeyDown||e.editor.fire("change")}function u(e){e.on("contentDom",function(){var n=e.editable();n.on("input",t.partial(a,n))})}return{init:u}}),i("utils/experiments",["ckLodash"],function(t){"use strict";var e={};return{set:function(n){e=t.clone(n)},isOpen:function(t){return!!e[t]}}}),i("utils/ieSpellCheckUtils",["utils/utils","utils/constants"],function(t,e){"use strict";function n(t){t.on("beforeCommandExec",function(t){r(t.editor)},null,null,0),t.on("afterCommandExec",function(){a()}),t.editable().on("cut",function(){a()}),t.editable().on("copy",function(){a()}),t.on("paste",function(){a()},null,null,0)}function r(e){var n=e.getSelection().getRanges()[0];if(n&&t.isSpellCheckCorrectionOccurred(e.editable().getText(),u())){var r=e.document.$.getSelection();n.setStart(new CKEDITOR.dom.node(r.anchorNode),r.anchorOffset),n.setEnd(new CKEDITOR.dom.node(r.focusNode),r.focusOffset)}}function i(t){function n(){c(t.editable().getText())}t.document.$.oncontextmenu=n,t.document.$.onmousedown=function(t){t.button===e.MOUSE_RIGHT_CLICK_BUTTON&&n()},t.document.$.onkeydown=function(t){a(),t.key===e.WINDOWS_APPS_KEY&&n()}}function o(t){i(t),n(t)}function a(){l=null}function u(){return l}function c(t){l=t}var l=null;return{bindToSpellCheckEvents:o}}),i("utils/setDataWithSelection",["ckLodash"],function(t){"use strict";function e(t,e){return f=t,s=e,""}function n(t,n){return n.type===CKEDITOR.NODE_TEXT&&(f=s=null,d=n.getText().replace(g,e),"{}"===f?(t.setStart(n,s),t.collapse(1)):(d=d.replace(h,e),f===h&&t.setStart(n,s),d=d.replace(m,e),f===m&&t.setEnd(n,s)),f)?(n.setText(d),!1):void 0}function r(e,n,r,i,o){var a=e.getAttribute("class").split(" "),u=t.find(a,function(e){return t.startsWith(e,i)}),c=parseInt(u.replace(i,""),10);
n[r](e,c),e.removeClass(o),e.removeClass(u)}function i(e){return t.startsWith(e,"child")}function o(t,e){var n=e.replace("child_","").split("_"),r=parseInt(n[0],10),i=parseInt(n[1],10);t.removeClass(e),t.getChild(r).split(i)}function a(e){for(var n,r=e.find(".split"),a=0;n=r.getItem(a++);){var u=n.getAttribute("class").split(" ");t(u).filter(i).forEach(t.bind(o,null,n)),n.removeClass("split")}}function u(e,i){var o=new CKEDITOR.dom.range(e);e.setHtml(i),a(e);var u,c,l=e.findOne(".startContainer"),s=e.findOne(".endContainer");if(l&&(r(l,o,"setStart","startOffset","startContainer"),u=!0),s&&(r(s,o,"setEnd","endOffset","endContainer"),c=!0),!u||!c){var f=new CKEDITOR.dom.range(e);f.selectNodeContents(e);var d=new CKEDITOR.dom.walker(f);d.evaluator=t.partial(n,o),d.lastForward()}return o}function c(t){var e=-1!==t.indexOf("{")||-1!==t.indexOf("startContainer"),n=-1!==t.indexOf("}")||-1!==t.indexOf("endContainer");return e&&n}function l(t,e){var n=t.editable();if(!c(e))return void n.setHtml(e);var r=t.on("selectionChange",function(t){t.cancel()},null,null,-1e3);n.focus(),r.removeListener();var i=u(n,e),o=t.getSelection();o.selectRanges([i])}var s,f,d,h="{",m="}",g="{}";return{setData:l}}),i("namespace/editorDotWIX",["ckLodash","utils/findElementUtils","utils/selectionUtils","utils/setDataWithSelection"],function(t,e,n,r){"use strict";function i(i){i.WIX={TestUtils:{setDataWithSelection:r.setData},getData:function(){return i.getData()},isMultipleBlockSelection:function(){return n.isMultipleBlockSelection(i)},setDataWithSelectionOnStart:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.noop;i.execCommand("wixSetHtml",n);var o=new CKEDITOR.dom.range(i.editable()),a=e.findFirstNonEmptyTextNode(i);a&&(o.setStart(a,0),o.collapse(),o.select()),r()},setHtmlWithSelectAll:function(t){var r=i.dataProcessor.toHtml(t),o=i.editable();o.setHtml(r);var a=new CKEDITOR.dom.range(i.editable()),u=e.findFirstNonEmptyTextNode(i),c=n.findLastTextNode(i,o);u&&c&&(a.setStart(u,0),a.setEnd(c,c.getText().length),a.select())},hasSelection:function(){return!n.isSelectedTextEmpty(i)}}}return{init:i}}),r(["ckLodash","commands/wixSetHtmlCommand","commands/styleCommand","commands/formatBlockCommand","commands/wixColorCommands","commands/basicStyleCommands","commands/listCommand","commands/letterSpacingCommand","commands/fontSizeCommand","commands/lineHeightCommand","commands/resetThemesAndStylesCommand","commands/resetThemeCommand","commands/toUpperCaseCommand","commands/wixCSS","commands/wixLink","commands/wixSelectLinks","commands/fontFamilyCommand","wixPaste/wixPaste","wixPaste/wixCopy","eventHandlers/keyHandler","eventHandlers/selectionChangeHandler","eventHandlers/inputEventHandler","utils/utils","utils/selectionUtils","utils/findElementUtils","utils/guardUtils","utils/experiments","utils/ieSpellCheckUtils","namespace/editorDotWIX"],function(t,e,n,r,i,o,a,u,c,l,s,f,d,h,m,g,p,v,_,E,y,C,T,x,b,O,S,I,k){"use strict";CKEDITOR.WIX.status="ready",CKEDITOR.on("instanceReady",function(e){function n(){return t.get(r,"document.$")?(T.isIE()&&I.bindToSpellCheckEvents(r),void r.document.$.execCommand("styleWithCSS",!0,null)):void setTimeout(n,20)}var r=e.editor;n()}),CKEDITOR.on("instanceLoaded",function(t){var T=t.editor;S.set(T.config.experiments||{}),T.config.disableNativeSpellChecker=!1,C.init(T),k.init(T),T.container.hide(),T.addCommand("font",new n("span","font")),T.addCommand("fontSize",new c),T.addCommand("fontFamily",new p),T.addCommand("letterSpacing",new u("span","letter-spacing")),T.addCommand("textShadow",new n("span","text-shadow")),T.addCommand("formatBlock",new r("font_")),T.addCommand("resetThemeAndStyles",s),T.addCommand("resetTheme",f),T.addCommand("wixCss",h()),T.addCommand("lineHeight",l),T.addCommand("toUpperCase",d),T.addCommand("wixSetHtml",e),T.addCommand("wixSelectLinks",new g),a.init(T),m.init(T),v.init(T),_.init(T),E.init(T),y.init(T),o.initUnBold(T),o.initUnItalic(T),i.initForeColorCommand(T),i.initBackColorCommand(T),T.getCommand("selectAll").editorFocus=!1})}),i("ckBootstrapInstance",function(){})}();
